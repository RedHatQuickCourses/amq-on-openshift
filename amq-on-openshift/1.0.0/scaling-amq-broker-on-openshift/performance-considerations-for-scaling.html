<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Performance Considerations for Scaling :: AMQ Broker on OpenShift: Deployment and Management</title>
    <link rel="prev" href="adjusting-resource-allocations-cpu-memory-for-broker-pods.html">
    <link rel="next" href="best-practices-for-scaling-in-openshift.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">AMQ Broker on OpenShift: Deployment and Management</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-on-openshift" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../overview-of-message-oriented-middleware/overview-of-message-oriented-middleware.html">Overview of Message-Oriented Middleware</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/introduction-to-message-oriented-middleware-mom.html">Introduction to Message-Oriented Middleware (MOM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/benefits-and-use-cases-of-asynchronous-messaging.html">Benefits and Use Cases of Asynchronous Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/core-concepts-producers-consumers-queues-topics.html">Core Concepts: Producers, Consumers, Queues, Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/common-messaging-patterns-point-to-point-publishsubscribe.html">Common Messaging Patterns (Point-to-Point, Publish/Subscribe)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-overview/amq-broker-overview.html">AMQ Broker Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/introduction-to-red-hat-amq-broker.html">Introduction to Red Hat AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/foundations-in-apache-activemq-artemis.html">Foundations in Apache ActiveMQ Artemis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/key-features-and-capabilities.html">Key Features and Capabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/supported-messaging-protocols-jms-amqp-mqtt-stomp-openwire.html">Supported Messaging Protocols (JMS, AMQP, MQTT, STOMP, OpenWire)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/amq-broker-architecture.html">AMQ Broker Architecture</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/deploying-amq-broker-on-openshift.html">Deploying AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/openshift-container-platform-fundamentals-for-amq-broker.html">OpenShift Container Platform Fundamentals for AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/introduction-to-the-amq-broker-operator.html">Introduction to the AMQ Broker Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/installing-the-amq-broker-operator-via-cli-or-operatorhub.html">Installing the AMQ Broker Operator via CLI or OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/understanding-amq-broker-custom-resource-definitions-crds.html">Understanding AMQ Broker Custom Resource Definitions (CRDs)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/creating-and-managing-broker-instances-with-custom-resources-crs.html">Creating and Managing Broker Instances with Custom Resources (CRs)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/monitoring-initial-broker-deployment.html">Monitoring Initial Broker Deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="scaling-amq-broker-on-openshift.html">Scaling AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="concepts-of-horizontal-and-vertical-scaling.html">Concepts of Horizontal and Vertical Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="scaling-broker-pods-and-replicas.html">Scaling Broker Pods and Replicas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="adjusting-resource-allocations-cpu-memory-for-broker-pods.html">Adjusting Resource Allocations (CPU, Memory) for Broker Pods</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="performance-considerations-for-scaling.html">Performance Considerations for Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="best-practices-for-scaling-in-openshift.html">Best Practices for Scaling in OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../securing-amq-broker-on-openshift/securing-amq-broker-on-openshift.html">Securing AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/encrypting-connections.html">Encrypting Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-ssltls-for-client-broker-communication.html">Configuring SSL/TLS for Client-Broker Communication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/managing-certificates-and-trust-stores-on-openshift.html">Managing Certificates and Trust Stores on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-secure-listeners.html">Enabling Secure Listeners</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-rbac-role-based-access-control.html">Enabling RBAC (Role-Based Access Control)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/defining-users-roles-and-permissions-in-amq-broker.html">Defining Users, Roles, and Permissions in AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-with-openshift-authentication-mechanisms.html">Integrating with OpenShift Authentication Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-external-identity-providers-idp.html">Integrating External Identity Providers (IDP)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/overview-of-external-idp-integration-eg-ldap-keycloak.html">Overview of External IDP Integration (e.g., LDAP, Keycloak)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-amq-broker-for-external-idp-authentication.html">Configuring AMQ Broker for External IDP Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/mapping-external-roles-to-broker-roles.html">Mapping External Roles to Broker Roles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/amq-broker-high-availability-on-openshift.html">AMQ Broker High Availability on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/introduction-to-high-availability-ha-concepts.html">Introduction to High Availability (HA) Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/broker-clustering-strategies-shared-store-vs-replicated-live-backup.html">Broker Clustering Strategies: Shared Store vs. Replicated Live-Backup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/deploying-and-configuring-an-ha-broker-pair.html">Deploying and Configuring an HA Broker Pair</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/understanding-failover-and-recovery-mechanisms.html">Understanding Failover and Recovery Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/persistence-and-data-replication-for-ha.html">Persistence and Data Replication for HA</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/different-message-stores-for-amq-broker-on-openshift.html">Different Message Stores for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/overview-of-message-store-options.html">Overview of Message Store Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/file-based-message-store-configuration.html">File-Based Message Store Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/jdbc-message-store-integration-with-external-databases.html">JDBC Message Store Integration with External Databases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/journal-vs-paging-for-message-persistence.html">Journal vs. Paging for Message Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/choosing-the-appropriate-message-store-strategy.html">Choosing the Appropriate Message Store Strategy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/openshift-storage-considerations-persistent-volumes.html">OpenShift Storage Considerations (Persistent Volumes)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/accessing-management-console-for-amq-broker-on-openshift.html">Accessing Management Console for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/introduction-to-the-hawtio-management-console.html">Introduction to the Hawtio Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/exposing-the-console-via-openshift-routes.html">Exposing the Console via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/authentication-and-authorization-for-console-access.html">Authentication and Authorization for Console Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/monitoring-broker-metrics-queues-and-topics.html">Monitoring Broker Metrics, Queues, and Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/performing-administrative-tasks-through-the-console.html">Performing Administrative Tasks through the Console</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/enabling-external-access-to-brokers-deployed-on-openshift.html">Enabling External Access to Brokers Deployed on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/openshift-networking-concepts-services-routes-ingress.html">OpenShift Networking Concepts: Services, Routes, Ingress</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/exposing-broker-listeners-via-openshift-routes.html">Exposing Broker Listeners via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/configuring-client-connections-for-external-access.html">Configuring Client Connections for External Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/security-implications-and-best-practices-for-external-access.html">Security Implications and Best Practices for External Access</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core-protocol-client-examples/core-protocol-client-examples.html">Core Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/introduction-to-amq-core-protocol.html">Introduction to AMQ Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/setting-up-a-core-protocol-client-development-environment.html">Setting Up a Core Protocol Client Development Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/developing-producers-and-consumers-with-java-core-protocol.html">Developing Producers and Consumers with Java Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/implementing-point-to-point-messaging.html">Implementing Point-to-Point Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/implementing-publishsubscribe-messaging.html">Implementing Publish/Subscribe Messaging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amqp-protocol-client-examples/amqp-protocol-client-examples.html">AMQP Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/introduction-to-amqp-10-standard.html">Introduction to AMQP 1.0 Standard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/setting-up-an-amqp-client-development-environment-eg-qpid-jms.html">Setting Up an AMQP Client Development Environment (e.g., Qpid JMS)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/developing-producers-and-consumers-with-amqp-clients-eg-java-python.html">Developing Producers and Consumers with AMQP Clients (e.g., Java, Python)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/connecting-to-amq-broker-using-amqp.html">Connecting to AMQ Broker using AMQP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/exploring-advanced-amqp-features.html">Exploring Advanced AMQP Features</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/hands-on-lab-deploying-and-managing-amq-broker.html">Hands-on Lab: Deploying and Managing AMQ Broker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-deploying-a-basic-amq-broker-instance.html">Lab: Deploying a Basic AMQ Broker Instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-configuring-external-access-and-testing-client-connectivity.html">Lab: Configuring External Access and Testing Client Connectivity</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-implementing-basic-security-encryption-rbac.html">Lab: Implementing Basic Security (Encryption, RBAC)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-deploying-an-ha-broker-cluster.html">Lab: Deploying an HA Broker Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-monitoring-with-the-management-console.html">Lab: Monitoring with the Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-developing-and-testing-core-protocol-and-amqp-clients.html">Lab: Developing and Testing Core Protocol and AMQP Clients</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">AMQ Broker on OpenShift: Deployment and Management</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></li>
    <li><a href="scaling-amq-broker-on-openshift.html">Scaling AMQ Broker on OpenShift</a></li>
    <li><a href="performance-considerations-for-scaling.html">Performance Considerations for Scaling</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Performance Considerations for Scaling</h1>
<h1 id="_performance_considerations_for_scaling_amq_broker_on_openshift" class="sect0"><a class="anchor" href="#_performance_considerations_for_scaling_amq_broker_on_openshift"></a>Performance Considerations for Scaling AMQ Broker on OpenShift</h1>
<div class="paragraph">
<p>When scaling your Red Hat AMQ Broker deployment on OpenShift, it&#8217;s not just about adding more pods or increasing their count; it&#8217;s crucially about ensuring each pod has the right resources to perform optimally. Misconfigured resource allocations can lead to performance bottlenecks, instability, or inefficient use of your OpenShift cluster, directly impacting message throughput, latency, and overall system reliability. This section delves into the key performance considerations related to resource management when scaling AMQ Broker instances.</p>
</div>
<div class="sect1">
<h2 id="_understanding_resource_allocations_for_broker_pods"><a class="anchor" href="#_understanding_resource_allocations_for_broker_pods"></a>Understanding Resource Allocations for Broker Pods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenShift (Kubernetes) provides mechanisms to manage the CPU and memory resources consumed by containers running within a Pod. For AMQ Broker, these settings are vital for stable and performant message processing, especially as you scale your deployment horizontally (adding more pods) or consider the implications for vertical scaling (adjusting resources for new pods).</p>
</div>
<div class="sect2">
<h3 id="_cpu_and_memory_requests_and_limits"><a class="anchor" href="#_cpu_and_memory_requests_and_limits"></a>CPU and Memory Requests and Limits</h3>
<div class="paragraph">
<p>Each broker container within an AMQ Broker Pod can have specific CPU and memory <code>requests</code> and <code>limits</code> defined in its Custom Resource (CR). These settings directly influence how OpenShift schedules your broker pods and how much host-node resources they can consume.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. CPU and Memory Parameters for AMQ Broker Pods</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requests.cpu</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <strong>minimum</strong> amount of host-node CPU that each broker container requests. This value is used by OpenShift&#8217;s scheduler to ensure that a node has at least this amount of available CPU before placing a pod on it. It represents the guaranteed CPU allocation.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limits.cpu</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <strong>maximum</strong> amount of host-node CPU that each broker container can consume. If a broker container attempts to exceed this limit, OpenShift throttles its CPU usage. This prevents a single container from monopolizing host CPU, but consistent throttling can degrade broker performance.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requests.memory</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <strong>minimum</strong> amount of host-node memory that each broker container requests. Similar to CPU requests, OpenShift uses this value during scheduling to guarantee that a node has at least this much memory available. It&#8217;s the guaranteed memory allocation.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limits.memory</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The <strong>maximum</strong> amount of host-node memory that each broker container can consume. If a broker container exceeds this limit, OpenShift will terminate the container with an <code>OOMKilled</code> (Out Of Memory Killed) error, which will cause the pod to restart. This ensures memory stability for the node but leads to service disruption for the broker.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you specify <code>limits</code> for a resource but do not specify <code>requests</code>, the broker container will implicitly request the configured <code>limits</code> values for that resource. For instance, if you define <code>limits.cpu: "500m"</code> and <code>limits.memory: "1024Mi"</code> without <code>requests</code>, the container will automatically request <code>500m</code> CPU and <code>1024Mi</code> memory. While this ensures a guaranteed QoS, it&#8217;s generally recommended to explicitly define both <code>requests</code> and <code>limits</code> for clarity and precise control.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Any resource limits and requests that you configure for each broker container also apply to the <code>Init Container</code> run by the Operator when initializing each broker Pod. This ensures consistent resource availability during the broker&#8217;s startup phase, which can be resource-intensive during configuration generation or initial data loading.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_impact_on_performance_and_scaling"><a class="anchor" href="#_impact_on_performance_and_scaling"></a>Impact on Performance and Scaling</h3>
<div class="paragraph">
<p>The careful configuration of these resource parameters has a direct and significant impact on the performance, stability, and scalability of your AMQ Broker deployment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Guaranteed Performance (<code>requests</code>):</strong> Setting appropriate <code>requests</code> ensures that your broker pods are scheduled on nodes with sufficient resources, preventing resource contention from the outset. If <code>requests</code> are too low, pods might be scheduled on overloaded nodes, leading to poor performance even if <code>limits</code> are generous. This directly impacts message processing latency and throughput.</p>
</li>
<li>
<p><strong>Preventing Resource Starvation (<code>limits.cpu</code>):</strong> <code>limits.cpu</code> prevents a single broker pod from consuming all CPU resources on a node, protecting other workloads. However, if your broker frequently hits its CPU limit, its performance will be throttled, causing message backlogs, increased latency, and reduced overall throughput. Careful tuning is required to balance resource sharing and individual broker performance.</p>
</li>
<li>
<p><strong>Ensuring Stability (<code>limits.memory</code>):</strong> Exceeding <code>limits.memory</code> results in an <code>OOMKilled</code> event, causing the broker pod to restart. This leads to service disruption, potential message reprocessing, and overall unreliability, especially for critical messaging workflows. Setting an appropriate <code>limits.memory</code> is crucial for stable operation under various load conditions.</p>
</li>
<li>
<p><strong>Efficient Horizontal Scaling:</strong> When you scale horizontally (adding more broker pods), each new pod will attempt to claim its requested resources. If <code>requests</code> are set too high, you might hit node capacity sooner, limiting your ability to scale out your AMQ Broker effectively and potentially leading to "pending" pods due to insufficient resources on available nodes. Conversely, if <code>requests</code> are too low, you might end up with many underperforming pods on overloaded nodes.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_best_practices_for_resource_configuration_and_tuning"><a class="anchor" href="#_best_practices_for_resource_configuration_and_tuning"></a>Best Practices for Resource Configuration and Tuning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat cannot recommend specific values for <code>limits</code> and <code>requests</code> because these are highly dependent on your specific messaging system use-cases, expected message volume, message size, number of clients, persistence requirements, and the resulting architecture. However, several best practices can guide your configuration for optimal performance and scalability:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Test and Tune in a Development Environment:</strong> It is <strong>critical</strong> to test and tune these values in a development or staging environment that closely mirrors your production setup before configuring them for your production environment. Simulate production loads (peak and average) to accurately understand the broker&#8217;s resource consumption patterns.</p>
</li>
<li>
<p><strong>Configure Before Initial Deployment:</strong> You <strong>must</strong> add configuration for <code>limits</code> and <code>requests</code> to the Custom Resource (CR) instance for your broker deployment <strong>before</strong> deploying the CR for the first time. It is <strong>not possible</strong> to add or modify this configuration to an AMQ Broker deployment that is already running. This makes initial sizing and robust testing even more important, as changes require a new deployment or a rolling update strategy if supported by the operator for other configuration fields (but not for resources).</p>
</li>
<li>
<p><strong>Monitor Key Metrics Continuously:</strong> Utilize the Hawtio management console or OpenShift monitoring tools (e.g., Prometheus and Grafana) to track key metrics such as CPU utilization, memory consumption, message throughput, message backlog size, and latency of your broker pods. This data is invaluable for identifying bottlenecks, validating your current settings, and informing future resource adjustments.</p>
</li>
<li>
<p><strong>Balance Requests and Limits for Quality of Service (QoS):</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Guaranteed QoS (<code>requests</code> = <code>limits</code>):</strong> This configuration provides the most stable performance guarantee, as the pod is always allocated its required resources. It&#8217;s often preferred for critical, performance-sensitive workloads like AMQ Broker, ensuring predictable behavior.</p>
</li>
<li>
<p><strong>Burstable QoS (low <code>requests</code>, higher <code>limits</code>):</strong> Allows pods to burst to higher resources when available but offers less strict performance guarantees. While it can be more efficient in terms of overall cluster utilization, it can lead to performance variability for your broker if resources become scarce.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Use Appropriate Units:</strong> For memory values, always use binary equivalents (Ei, Pi, Ti, Gi, Mi, Ki) to avoid ambiguity (e.g., <code>1024Mi</code> for 1 Gigabyte). For CPU values, use milliCPUs (e.g., <code>500m</code> for half a CPU core, <code>1000m</code> or <code>1</code> for one full CPU core).</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hands_on_activity_configuring_resource_limits_for_a_new_amq_broker_instance"><a class="anchor" href="#_hands_on_activity_configuring_resource_limits_for_a_new_amq_broker_instance"></a>Hands-on Activity: Configuring Resource Limits for a New AMQ Broker Instance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This lab demonstrates how to define CPU and memory requests and limits when deploying a new AMQ Broker instance. Understanding how to configure these <strong>at deployment time</strong> is crucial for performance scaling, as they cannot be changed on an already running broker.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>An OpenShift cluster with the AMQ Broker Operator installed.</p>
</li>
<li>
<p>The <code>oc</code> CLI tool configured and logged in to your OpenShift cluster with administrative privileges for the chosen project.</p>
</li>
<li>
<p>A new OpenShift project where you can deploy the broker. For example, <code>amq-scaling-lab</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_step_1_create_a_new_project"><a class="anchor" href="#_step_1_create_a_new_project"></a>Step 1: Create a New Project</h3>
<div class="paragraph">
<p>First, create a new OpenShift project for this lab.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc new-project amq-scaling-lab</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_define_the_broker_custom_resource_with_resource_allocations"><a class="anchor" href="#_step_2_define_the_broker_custom_resource_with_resource_allocations"></a>Step 2: Define the Broker Custom Resource with Resource Allocations</h3>
<div class="paragraph">
<p>Create a new file named <code>broker-with-resources.yaml</code> with the following content. This configuration defines a single-node broker but includes specific CPU and memory <code>requests</code> and <code>limits</code> within the <code>deploymentPlan</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: broker.amq.io/v1beta1
kind: ActiveMQArtemis
metadata:
  name: my-broker-scaled
spec:
  deploymentPlan:
    size: 1
    image: registry.redhat.io/amq7/amq-broker-rhel8:7.12 # Or your preferred AMQ Broker image
    resources:
      limits:
        cpu: "1000m"   # Limit to 1 CPU core
        memory: "2Gi"  # Limit to 2 Gigabytes
      requests:
        cpu: "500m"    # Request a minimum of 0.5 CPU core
        memory: "1Gi"  # Request a minimum of 1 Gigabyte
  # Add other basic configuration if needed, e.g., persistence
  addressSettings:
    - name: "#"
      config:
        maxSizeBytes: "100mb"
        addressFullMessagePolicy: BLOCK
  # Consider adding persistence for production deployments
  # persistent: true
  # journalType: NIO</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example:
*   The broker pod will <strong>request</strong> 0.5 CPU cores (<code>500m</code>) and 1 GiB of memory (<code>1Gi</code>). These are its guaranteed minimum resources.
*   The broker pod will be <strong>limited</strong> to 1 CPU core (<code>1000m</code> or <code>1</code>) and 2 GiB of memory (<code>2Gi</code>). If it tries to use more than these limits, its CPU usage will be throttled, or it may be terminated due to out-of-memory (OOMKilled).</p>
</div>
</div>
<div class="sect2">
<h3 id="_step_3_deploy_the_amq_broker_instance"><a class="anchor" href="#_step_3_deploy_the_amq_broker_instance"></a>Step 3: Deploy the AMQ Broker Instance</h3>
<div class="paragraph">
<p>Apply the Custom Resource definition to your OpenShift cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f broker-with-resources.yaml -n amq-scaling-lab</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_4_verify_resource_allocation"><a class="anchor" href="#_step_4_verify_resource_allocation"></a>Step 4: Verify Resource Allocation</h3>
<div class="paragraph">
<p>Check the deployed pod&#8217;s description to confirm that the resource requests and limits have been applied correctly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -n amq-scaling-lab
# Wait for the pod to be in a 'Running' state, then get its description
oc describe pod $(oc get pods -n amq-scaling-lab -o jsonpath='{.items[0].metadata.name}') -n amq-scaling-lab | grep -A 5 "Limits:"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see output similar to this, confirming your defined limits and requests under the <code>Containers</code> section for the broker container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">    Limits:
      cpu:     1
      memory:  2Gi
    Requests:
      cpu:     500m
      memory:  1Gi</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_5_horizontally_scale_the_broker_example"><a class="anchor" href="#_step_5_horizontally_scale_the_broker_example"></a>Step 5: Horizontally Scale the Broker (Example)</h3>
<div class="paragraph">
<p>Now, let&#8217;s demonstrate horizontal scaling. While the resource limits per pod remain static after initial deployment, scaling <strong>out</strong> increases the number of pods, distributing the load across more instances. Each new instance will adhere to the same defined resource profile, which has direct performance implications for the overall cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc scale activemqartemis my-broker-scaled --replicas=2 -n amq-scaling-lab</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify that a second broker pod is created and running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -n amq-scaling-lab</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will observe two pods, typically named <code>my-broker-scaled-ss-0</code> and <code>my-broker-scaled-ss-1</code>, both running with the same CPU and memory requests and limits you defined in the Custom Resource. This demonstrates that scaling operations replicate the defined resource profiles.</p>
</div>
</div>
<div class="sect2">
<h3 id="_step_6_clean_up_optional"><a class="anchor" href="#_step_6_clean_up_optional"></a>Step 6: Clean Up (Optional)</h3>
<div class="paragraph">
<p>To remove the deployed broker and the project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc delete activemqartemis my-broker-scaled -n amq-scaling-lab
oc delete project amq-scaling-lab</code></pre>
</div>
</div>
<div class="paragraph">
<p>This hands-on activity illustrates the fundamental step of defining resource profiles for your AMQ Broker instances, which is a core performance consideration when planning for scaling on OpenShift. Future scaling decisions, whether horizontal (adding more pods) or "vertical" (adjusting resource limits for <strong>new</strong> deployments), will build upon this foundation. Consistent monitoring and iterative tuning are essential for maintaining optimal performance.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="adjusting-resource-allocations-cpu-memory-for-broker-pods.html">Adjusting Resource Allocations (CPU, Memory) for Broker Pods</a></span>
  <span class="next"><a href="best-practices-for-scaling-in-openshift.html">Best Practices for Scaling in OpenShift</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
