<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab: Configuring External Access and Testing Client Connectivity :: AMQ Broker on OpenShift: Deployment and Management</title>
    <link rel="prev" href="lab-deploying-a-basic-amq-broker-instance.html">
    <link rel="next" href="lab-implementing-basic-security-encryption-rbac.html">
    <meta name="description" content="This lab guides you through exposing an AMQ Broker on OpenShift externally and testing client connectivity.">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">AMQ Broker on OpenShift: Deployment and Management</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-on-openshift" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../overview-of-message-oriented-middleware/overview-of-message-oriented-middleware.html">Overview of Message-Oriented Middleware</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/introduction-to-message-oriented-middleware-mom.html">Introduction to Message-Oriented Middleware (MOM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/benefits-and-use-cases-of-asynchronous-messaging.html">Benefits and Use Cases of Asynchronous Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/core-concepts-producers-consumers-queues-topics.html">Core Concepts: Producers, Consumers, Queues, Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/common-messaging-patterns-point-to-point-publishsubscribe.html">Common Messaging Patterns</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-overview/amq-broker-overview.html">AMQ Broker Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/introduction-to-red-hat-amq-broker.html">Introduction to Red Hat AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/foundations-in-apache-activemq-artemis.html">Foundations in Apache ActiveMQ Artemis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/key-features-and-capabilities.html">Key Features and Capabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/supported-messaging-protocols-jms-amqp-mqtt-stomp-openwire.html">Supported Messaging Protocols (JMS, AMQP, MQTT, STOMP, OpenWire)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/amq-broker-architecture.html">AMQ Broker Architecture</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/deploying-amq-broker-on-openshift.html">Deploying AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/openshift-container-platform-fundamentals-for-amq-broker.html">OpenShift Container Platform Fundamentals for AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/introduction-to-the-amq-broker-operator.html">Introduction to the AMQ Broker Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/installing-the-amq-broker-operator-via-cli-or-operatorhub.html">Installing the AMQ Broker Operator via CLI or OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/understanding-amq-broker-custom-resource-definitions-crds.html">understanding-amq-broker-custom-resource-definitions-crds.adoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/creating-and-managing-broker-instances-with-custom-resources-crs.html">Creating and Managing Broker Instances with Custom Resources (CRs)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/monitoring-initial-broker-deployment.html">Monitoring Initial Broker Deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/scaling-amq-broker-on-openshift.html">Scaling AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/concepts-of-horizontal-and-vertical-scaling.html">Concepts of Horizontal and Vertical Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/scaling-broker-pods-and-replicas.html">Scaling Broker Pods and Replicas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/adjusting-resource-allocations-cpu-memory-for-broker-pods.html">Adjusting Resource Allocations (CPU, Memory) for Broker Pods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/performance-considerations-for-scaling.html">Performance Considerations for Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/best-practices-for-scaling-in-openshift.html">Best Practices for Scaling AMQ Broker on OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../securing-amq-broker-on-openshift/securing-amq-broker-on-openshift.html">Securing AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/encrypting-connections.html">Encrypting Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-ssltls-for-client-broker-communication.html">Configuring SSL/TLS for Client-Broker Communication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/managing-certificates-and-trust-stores-on-openshift.html">Managing Certificates and Trust Stores on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-secure-listeners.html">Enabling Secure Listeners</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-rbac-role-based-access-control.html">Enabling RBAC (Role-Based Access Control)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/defining-users-roles-and-permissions-in-amq-broker.html">Defining Users, Roles, and Permissions in AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-with-openshift-authentication-mechanisms.html">Integrating with OpenShift Authentication Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-external-identity-providers-idp.html">Integrating External Identity Providers (IDP)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/overview-of-external-idp-integration-eg-ldap-keycloak.html">Overview of External IDP Integration (e.g., LDAP, Keycloak)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-amq-broker-for-external-idp-authentication.html">Configuring AMQ Broker for External Identity Provider (IDP) Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/mapping-external-roles-to-broker-roles.html">Mapping External Roles to Broker Roles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/amq-broker-high-availability-on-openshift.html">AMQ Broker High Availability on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/introduction-to-high-availability-ha-concepts.html">Introduction to High Availability (HA) Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/broker-clustering-strategies-shared-store-vs-replicated-live-backup.html">Broker Clustering Strategies: Shared Store vs. Replicated Live-Backup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/deploying-and-configuring-an-ha-broker-pair.html">Deploying and Configuring an HA Broker Pair</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/understanding-failover-and-recovery-mechanisms.html">Understanding Failover and Recovery Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/persistence-and-data-replication-for-ha.html">Persistence and Data Replication for HA</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/different-message-stores-for-amq-broker-on-openshift.html">Different Message Stores for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/overview-of-message-store-options.html">Overview of Message Store Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/file-based-message-store-configuration.html">File-Based Message Store Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/jdbc-message-store-integration-with-external-databases.html">JDBC Message Store Integration with External Databases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/journal-vs-paging-for-message-persistence.html">Journal vs. Paging for Message Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/choosing-the-appropriate-message-store-strategy.html">Choosing the Appropriate Message Store Strategy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/openshift-storage-considerations-persistent-volumes.html">Storage Considerations</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/accessing-management-console-for-amq-broker-on-openshift.html">Accessing Management Console for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/introduction-to-the-hawtio-management-console.html">Introduction to the Hawtio Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/exposing-the-console-via-openshift-routes.html">Exposing the Hawtio Management Console via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/authentication-and-authorization-for-console-access.html">Authentication and Authorization for AMQ Broker Management Console Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/monitoring-broker-metrics-queues-and-topics.html">Monitoring Broker Metrics, Queues, and Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/performing-administrative-tasks-through-the-console.html">Performing Administrative Tasks through the Console</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/enabling-external-access-to-brokers-deployed-on-openshift.html">Enabling External Access to Brokers Deployed on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/openshift-networking-concepts-services-routes-ingress.html">OpenShift Networking Concepts: Services, Routes, Ingress</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/exposing-broker-listeners-via-openshift-routes.html">Exposing Broker Listeners via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/configuring-client-connections-for-external-access.html">Configuring Client Connections for External Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/security-implications-and-best-practices-for-external-access.html">Securing External Access to AMQ Broker on OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core-protocol-client-examples/core-protocol-client-examples.html">Core Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/introduction-to-amq-core-protocol.html">Introduction to AMQ Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/setting-up-a-core-protocol-client-development-environment.html">Setting Up a Core Protocol Client Development Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/developing-producers-and-consumers-with-java-core-protocol.html">Developing Producers and Consumers with Java Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/implementing-point-to-point-messaging.html">Implementing Point-to-Point Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/implementing-publishsubscribe-messaging.html">Implementing Publish/Subscribe Messaging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amqp-protocol-client-examples/amqp-protocol-client-examples.html">AMQP Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/introduction-to-amqp-10-standard.html">Introduction to AMQP 1.0 Standard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/setting-up-an-amqp-client-development-environment-eg-qpid-jms.html">Setting Up an AMQP Client Development Environment (e.g., Qpid JMS)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/developing-producers-and-consumers-with-amqp-clients-eg-java-python.html">Developing Producers and Consumers with AMQP Clients (e.g., Java, Python)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/connecting-to-amq-broker-using-amqp.html">Connecting to AMQ Broker using AMQP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/exploring-advanced-amqp-features.html">Exploring Advanced AMQP Features</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="hands-on-lab-deploying-and-managing-amq-broker.html">Hands-on Lab: Deploying and Managing AMQ Broker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="lab-deploying-a-basic-amq-broker-instance.html">Lab: Deploying a Basic AMQ Broker Instance</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="lab-configuring-external-access-and-testing-client-connectivity.html">Lab: Configuring External Access and Testing Client Connectivity</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="lab-implementing-basic-security-encryption-rbac.html">Lab: Implementing Basic Security (Encryption, RBAC)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="lab-deploying-an-ha-broker-cluster.html">Lab: Deploying an HA Broker Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="lab-monitoring-with-the-management-console.html">Lab: Monitoring with the Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="lab-developing-and-testing-core-protocol-and-amqp-clients.html">Lab: Developing and Testing Core Protocol and AMQP Clients</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">AMQ Broker on OpenShift: Deployment and Management</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></li>
    <li><a href="hands-on-lab-deploying-and-managing-amq-broker.html">Hands-on Lab: Deploying and Managing AMQ Broker</a></li>
    <li><a href="lab-configuring-external-access-and-testing-client-connectivity.html">Lab: Configuring External Access and Testing Client Connectivity</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Lab: Configuring External Access and Testing Client Connectivity</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
This lab demonstrates how to enable external access to an AMQ Broker instance deployed on OpenShift by creating OpenShift Routes. You will then develop and run a simple Core Protocol client application to send and receive messages, verifying successful external connectivity to your broker.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>A running OpenShift cluster.</p>
</li>
<li>
<p><a href="#amq-broker:labs:lab-deploying-a-basic-amq-broker-instance.adoc" class="xref unresolved">Lab: Deploying a Basic AMQ Broker Instance</a> completed, resulting in a deployed AMQ Broker instance.</p>
</li>
<li>
<p><code>oc</code> (OpenShift CLI) configured and logged in to your cluster.</p>
</li>
<li>
<p>Java Development Kit (JDK) 11 or later installed.</p>
</li>
<li>
<p>Apache Maven 3.6 or later installed.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exposing_the_broker_via_openshift_route"><a class="anchor" href="#_exposing_the_broker_via_openshift_route"></a>Exposing the Broker via OpenShift Route</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When AMQ Broker is deployed on OpenShift, the AMQ Broker Operator typically creates an OpenShift <code>Service</code> to expose the broker&#8217;s internal network listeners. To allow clients <strong>outside</strong> the OpenShift cluster to connect, you need to create an OpenShift <code>Route</code>. A <code>Route</code> exposes a <code>Service</code> at a hostname, allowing external clients to reach it.</p>
</div>
<div class="paragraph">
<p>For non-HTTP connections like the AMQ Core Protocol, clients must explicitly specify the port number as part of the connection URL. When using an OpenShift Route with TLS <code>termination: edge</code>, the default external port is usually <code>443</code>. The OpenShift router handles the TLS termination and then forwards the traffic to the broker&#8217;s internal service, potentially re-encrypting it depending on the <code>service.spec.tls</code> configuration.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to your project namespace.</p>
<div class="paragraph">
<p>Ensure you are in the OpenShift project where your AMQ Broker is deployed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc project &lt;your-project-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;your-project-name&gt;</code> with the OpenShift project name.</p>
</div>
</li>
<li>
<p>Identify the AMQ Broker Service.</p>
<div class="paragraph">
<p>The AMQ Broker Operator typically names the service based on the broker&#8217;s Custom Resource (CR) name. If your broker CR is named <code>my-broker</code>, the service might be <code>my-broker-amq-broker-acceptors</code>. You can list services to confirm:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get svc</code></pre>
</div>
</div>
<div class="paragraph">
<p>Look for a service related to your broker, typically exposing ports like <code>61616</code> (Core protocol), <code>5672</code> (AMQP), etc. For this lab, we&#8217;ll assume the Core protocol port (61616) is exposed.</p>
</div>
</li>
<li>
<p>Create an OpenShift Route for the broker.</p>
<div class="paragraph">
<p>We will create an <code>Edge</code> terminated TLS route for secure external access. This means OpenShift handles the TLS certificate, and the client connects via TLS to the route&#8217;s hostname. The OpenShift router then forwards the traffic to the internal broker service.</p>
</div>
<div class="paragraph">
<p>Create a file named <code>broker-route.yaml</code> with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: my-broker-external-route
  labels:
    app: my-broker
spec:
  to:
    kind: Service
    name: &lt;your-broker-service-name&gt; <i class="conum" data-value="1"></i><b>(1)</b>
    weight: 100
  port:
    targetPort: 61616 <i class="conum" data-value="2"></i><b>(2)</b>
  tls:
    termination: edge
    insecureEdgeTerminationPolicy: Redirect
  wildcardPolicy: None</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code>&lt;your-broker-service-name&gt;</code> with the actual name of your broker&#8217;s service (e.g., <code>my-broker-amq-broker-acceptors</code>).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is the default target port for the AMQ Core protocol.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Apply the Route configuration.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f broker-route.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>Verify the Route and retrieve its hostname.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get route my-broker-external-route</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note down the <code>HOST/PORT</code> value from the output (e.g., <code>my-broker-external-route-your-project.apps.cluster.example.com</code>). This is the external URL your clients will use to connect to the broker.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developing_a_core_protocol_client"><a class="anchor" href="#_developing_a_core_protocol_client"></a>Developing a Core Protocol Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will create a simple Java client that uses the AMQ Core Protocol to send and receive messages. This client will demonstrate how to configure connectivity to the OpenShift Route.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new directory for your client project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir amq-client-external-access
cd amq-client-external-access</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>pom.xml</code> file for Maven.</p>
<div class="paragraph">
<p>This <code>pom.xml</code> defines the project structure, dependencies, and uses the <code>maven-shade-plugin</code> to create self-contained executable JARs for both the producer and consumer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.redhat.amq&lt;/groupId&gt;
    &lt;artifactId&gt;amq-external-client&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;

    &lt;properties&gt;
        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;activemq.version&gt;2.31.0&lt;/activemq.version&gt; &lt;!-- &lt;1&gt; --&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;
            &lt;artifactId&gt;artemis-jakarta-client&lt;/artifactId&gt; &lt;!-- &lt;2&gt; --&gt;
            &lt;version&gt;${activemq.version}&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.8.1&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;source&gt;${maven.compiler.source}&lt;/source&gt;
                    &lt;target&gt;${maven.compiler.target}&lt;/target&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.2.4&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;phase&gt;package&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;shade&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;transformers&gt;
                                &lt;transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer"&gt;
                                    &lt;mainClass&gt;com.redhat.amq.external.Producer&lt;/mainClass&gt;
                                &lt;/transformer&gt;
                            &lt;/transformers&gt;
                            &lt;finalName&gt;amq-client-producer&lt;/finalName&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                    &lt;execution&gt;
                        &lt;id&gt;consumer&lt;/id&gt;
                        &lt;phase&gt;package&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;shade&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;transformers&gt;
                                &lt;transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer"&gt;
                                    &lt;mainClass&gt;com.redhat.amq.external.Consumer&lt;/mainClass&gt;
                                &lt;/transformer&gt;
                            &lt;/transformers&gt;
                            &lt;finalName&gt;amq-client-consumer&lt;/finalName&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use a recent compatible version of the Apache ActiveMQ Artemis client.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>For Jakarta EE compatible APIs. If you require Java EE (JMS 1.1) APIs, use <code>artemis-jms-client</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create the Producer class.</p>
<div class="paragraph">
<p>Create the directory <code>src/main/java/com/redhat/amq/external</code> and then create <code>Producer.java</code> inside it. This producer will connect to the broker and send 10 messages to a queue.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.amq.external;

import org.apache.activemq.artemis.api.core.client.ActiveMQClient;
import org.apache.activemq.artemis.api.core.client.ClientMessage;
import org.apache.activemq.artemis.api.core.client.ClientProducer;
import org.apache.activemq.artemis.api.core.client.ClientSession;
import org.apache.activemq.artemis.api.core.client.ClientSessionFactory;
import org.apache.activemq.artemis.api.core.client.ServerLocator;
import org.apache.activemq.artemis.api.core.SimpleString;

import java.util.logging.Logger;

public class Producer {

    private static final Logger logger = Logger.getLogger(Producer.class.getName());
    private static final String CONNECTION_URI = System.getProperty("broker.uri", "tcp://localhost:61616"); <i class="conum" data-value="1"></i><b>(1)</b>
    private static final String QUEUE_NAME = System.getProperty("queue.name", "myQueue");

    public static void main(String[] args) throws Exception {
        ServerLocator locator = null;
        ClientSessionFactory sessionFactory = null;
        ClientSession session = null;
        ClientProducer producer = null;

        try {
            logger.info("Connecting to broker at: " + CONNECTION_URI);
            locator = ActiveMQClient.createServerLocator(CONNECTION_URI); <i class="conum" data-value="2"></i><b>(2)</b>

            // Important: For external access to a single broker via a static Route,
            // prevent the client from trying to discover topology information from the broker
            // if you don't want it to load balance or find other brokers in a cluster.
            // This is especially relevant if the route only exposes a single broker pod.
            locator.setUseTopologyForLoadBalancing(false); <i class="conum" data-value="3"></i><b>(3)</b>
            locator.setCallTimeout(10000); // Set a reasonable timeout for blocking calls
            locator.setConnectionTTL(10000); // Set connection time-to-live

            sessionFactory = locator.createSessionFactory();
            session = sessionFactory.createSession();
            producer = session.createProducer(new SimpleString(QUEUE_NAME));

            for (int i = 0; i &lt; 10; i++) {
                ClientMessage message = session.createMessage(true);
                String messageText = "Hello AMQ Broker! Message " + i;
                message.writeBodyBufferString(messageText);
                producer.send(message);
                logger.info("Sent message: " + messageText);
                Thread.sleep(1000);
            }

            session.start(); // Start the session to enable message flow

        } finally {
            if (producer != null) producer.close();
            if (session != null) session.close();
            if (sessionFactory != null) sessionFactory.close();
            if (locator != null) locator.close();
            logger.info("Producer finished.");
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The connection URI can be overridden via a system property for flexibility.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>createServerLocator</code> automatically parses connection options from the URI string, including <code>sslEnabled</code>, <code>trustAll</code>, etc.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>As per the documentation, for Core protocol clients, <code>useTopologyForLoadBalancing=false</code> should be set if you donâ€™t want external clients to load balance connections across brokers in a cluster when connecting to specific route hostnames.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create the Consumer class.</p>
<div class="paragraph">
<p>Create <code>Consumer.java</code> in the same directory. This consumer will connect to the broker and listen for messages on the specified queue for a minute.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.amq.external;

import org.apache.activemq.artemis.api.core.client.ActiveMQClient;
import org.apache.activemq.artemis.api.core.client.ClientConsumer;
import org.apache.activemq.artemis.api.core.client.ClientMessage;
import org.apache.activemq.artemis.api.core.client.ClientSession;
import org.apache.activemq.artemis.api.core.client.ClientSessionFactory;
import org.apache.activemq.artemis.api.core.client.ServerLocator;
import org.apache.activemq.artemis.api.core.QueueConfiguration;
import org.apache.activemq.artemis.api.core.RoutingType;
import org.apache.activemq.artemis.api.core.SimpleString;

import java.util.logging.Logger;

public class Consumer {

    private static final Logger logger = Logger.getLogger(Consumer.class.getName());
    private static final String CONNECTION_URI = System.getProperty("broker.uri", "tcp://localhost:61616");
    private static final String QUEUE_NAME = System.getProperty("queue.name", "myQueue");

    public static void main(String[] args) throws Exception {
        ServerLocator locator = null;
        ClientSessionFactory sessionFactory = null;
        ClientSession session = null;
        ClientConsumer consumer = null;

        try {
            logger.info("Connecting to broker at: " + CONNECTION_URI);
            locator = ActiveMQClient.createServerLocator(CONNECTION_URI);
            locator.setUseTopologyForLoadBalancing(false);
            locator.setCallTimeout(10000);
            locator.setConnectionTTL(10000);

            sessionFactory = locator.createSessionFactory();
            session = sessionFactory.createSession();

            // Create the queue if it does not exist (idempotent operation)
            session.createQueue(new QueueConfiguration(QUEUE_NAME).setRoutingType(RoutingType.ANYCAST).setDurable(true));

            consumer = session.createConsumer(new SimpleString(QUEUE_NAME));
            consumer.setMessageHandler(message -&gt; { // Asynchronous message processing
                try {
                    String messageText = message.getBodyBuffer().readString();
                    logger.info("Received message: " + messageText);
                    message.acknowledge(); // Acknowledge the message
                } catch (Exception e) {
                    logger.severe("Error processing message: " + e.getMessage());
                }
            });

            session.start(); // Start the session to begin receiving messages
            logger.info("Consumer started. Waiting for messages on queue: " + QUEUE_NAME);

            // Keep the consumer alive for a certain period (e.g., 60 seconds)
            // or until manually stopped to allow message processing.
            Thread.sleep(60000);

        } finally {
            if (consumer != null) consumer.close();
            if (session != null) session.close();
            if (sessionFactory != null) sessionFactory.close();
            if (locator != null) locator.close();
            logger.info("Consumer finished.");
        }
    }
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing_client_connectivity"><a class="anchor" href="#_testing_client_connectivity"></a>Testing Client Connectivity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now, let&#8217;s compile and run our clients to test the external connection to the AMQ Broker via the OpenShift Route.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build the client applications.</p>
<div class="paragraph">
<p>From the <code>amq-client-external-access</code> directory, execute the Maven build command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn clean package</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command compiles the Java code and uses the <code>maven-shade-plugin</code> to generate two executable JARs in the <code>target/</code> directory: <code>amq-client-producer.jar</code> and <code>amq-client-consumer.jar</code>.</p>
</div>
</li>
<li>
<p>Determine the Broker Connection URI.</p>
<div class="paragraph">
<p>Recall the <code>HOST/PORT</code> value from your <code>my-broker-external-route</code> (e.g., <code>my-broker-external-route-your-project.apps.cluster.example.com</code>).
Since we created an <code>edge</code> terminated route, the client must initiate a TLS connection, and the default HTTPS port <code>443</code> is typically used for routes. The Core protocol uses <code>tcp://</code> as its scheme, so for TLS, we append <code>?sslEnabled=true</code>.</p>
</div>
<div class="paragraph">
<p>For lab environments, where the OpenShift cluster might use self-signed certificates or certificates not trusted by your local JDK&#8217;s truststore, you might need to instruct the client to trust all certificates and bypass hostname verification. <strong>This is not recommended for production environments.</strong></p>
</div>
<div class="paragraph">
<p>Construct your <code>BROKER_URI</code> by replacing <code>&lt;your-route-hostname&gt;</code> with the actual hostname from your <code>oc get route</code> output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export BROKER_URI="tcp://&lt;your-route-hostname&gt;:443?sslEnabled=true&amp;trustAll=true&amp;verifyHost=false"</code></pre>
</div>
</div>
</li>
<li>
<p>Run the Consumer.</p>
<div class="paragraph">
<p>Open a <strong>new terminal window or tab</strong> and run the consumer application. This consumer will connect to the broker and wait for messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -Dbroker.uri="${BROKER_URI}" -Dqueue.name="myQueue" -jar target/amq-client-consumer.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see output indicating the consumer is connecting and waiting for messages on <code>myQueue</code>.</p>
</div>
</li>
<li>
<p>Run the Producer.</p>
<div class="paragraph">
<p>In your <strong>original terminal</strong>, run the producer application. This producer will connect to the same broker and send 10 messages to <code>myQueue</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -Dbroker.uri="${BROKER_URI}" -Dqueue.name="myQueue" -jar target/amq-client-producer.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see output from the producer sending messages.</p>
</div>
</li>
<li>
<p>Observe the Output.</p>
<div class="paragraph">
<p>Simultaneously, in the consumer&#8217;s terminal, you should see messages being received.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Producer Output Example</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">INFO: Connecting to broker at: tcp://my-broker-external-route-your-project.apps.cluster.example.com:443?sslEnabled=true&amp;trustAll=true&amp;verifyHost=false
INFO: Sent message: Hello AMQ Broker! Message 0
INFO: Sent message: Hello AMQ Broker! Message 1
...
INFO: Sent message: Hello AMQ Broker! Message 9
INFO: Producer finished.</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Consumer Output Example</strong>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">INFO: Connecting to broker at: tcp://my-broker-external-route-your-project.apps.cluster.example.com:443?sslEnabled=true&amp;trustAll=true&amp;verifyHost=false
INFO: Consumer started. Waiting for messages on queue: myQueue
INFO: Received message: Hello AMQ Broker! Message 0
INFO: Received message: Hello AMQ Broker! Message 1
...
INFO: Received message: Hello AMQ Broker! Message 9
INFO: Consumer finished.</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you see messages being sent by the producer and successfully received by the consumer, congratulations! You have successfully configured external access to your AMQ Broker on OpenShift and tested client connectivity using the AMQ Core Protocol.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For production environments, directly using <code>trustAll=true</code> and <code>verifyHost=false</code> is a significant security risk as it disables crucial TLS security checks. Always use proper TLS configuration with trusted certificates and hostname verification. Refer to <a href="#amq-broker:securing-amq-broker-on-openshift.adoc" class="xref unresolved">Securing AMQ Broker on OpenShift</a> for detailed guidance on configuring SSL/TLS, managing certificates, and client trust stores.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting_tips"><a class="anchor" href="#_troubleshooting_tips"></a>Troubleshooting Tips</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Route Not Found</strong>:</p>
</li>
<li>
<p>Double-check the route name and project using <code>oc get route</code>.</p>
</li>
<li>
<p>Ensure the <code>broker-route.yaml</code> was applied correctly with <code>oc apply -f broker-route.yaml</code>.</p>
</li>
<li>
<p><strong>Connection Refused / Failed to connect</strong>:</p>
</li>
<li>
<p>Ensure the AMQ Broker pod is running (<code>oc get pod</code>).</p>
</li>
<li>
<p>Verify the <code>targetPort</code> in the <code>Route</code> (<code>broker-route.yaml</code>) matches the broker&#8217;s listener port (e.g., <code>61616</code>).</p>
</li>
<li>
<p>Check your <code>BROKER_URI</code> for correct hostname and port <code>443</code>.</p>
</li>
<li>
<p>If OpenShift network policies are in place, they might be blocking external traffic to the route or internal traffic from the router to the service.</p>
</li>
<li>
<p><strong>SSL Handshake Failure</strong>:</p>
</li>
<li>
<p>If using an <code>edge</code> terminated route, ensure <code>sslEnabled=true</code> is present in your client&#8217;s <code>CONNECTION_URI</code>.</p>
</li>
<li>
<p>If you are not using <code>trustAll=true</code> (which is the recommended approach for production), ensure your client&#8217;s trust store contains the certificate authority (CA) that signed the OpenShift Route&#8217;s certificate, or the certificate itself.</p>
</li>
<li>
<p>If the broker itself uses TLS (e.g., with a <code>passthrough</code> route), ensure the broker&#8217;s TLS configuration is correct and its certificate is trusted by the client.</p>
</li>
<li>
<p><strong>Client Timeout</strong>:</p>
</li>
<li>
<p>Increase <code>locator.setCallTimeout()</code> and <code>locator.setConnectionTTL()</code> in the client code if your network has high latency or is congested.</p>
</li>
<li>
<p><strong>Messages Not Received</strong>:</p>
</li>
<li>
<p>Ensure the <code>QUEUE_NAME</code> is consistent between the producer and consumer.</p>
</li>
<li>
<p>Check the broker&#8217;s logs (<code>oc logs &lt;broker-pod-name&gt;</code>) for any errors related to messages or connections.</p>
</li>
<li>
<p>Verify the queue actually exists on the broker (this can be confirmed via the Hawtio management console, covered in <a href="#amq-broker:accessing-management-console-for-amq-broker-on-openshift.adoc" class="xref unresolved">Accessing Management Console for AMQ Broker on OpenShift</a>).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cleaning_up_optional"><a class="anchor" href="#_cleaning_up_optional"></a>Cleaning Up (Optional)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To remove the resources created in this lab, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the running consumer application in its terminal by pressing <code>Ctrl+C</code>.</p>
</li>
<li>
<p>Delete the client project directory:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd ..
rm -rf amq-client-external-access</code></pre>
</div>
</div>
</li>
<li>
<p>Delete the OpenShift Route:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc delete -f broker-route.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>If you wish to also delete the AMQ Broker instance itself, refer to the cleanup steps in <a href="#amq-broker:labs:lab-deploying-a-basic-amq-broker-instance.adoc" class="xref unresolved">Lab: Deploying a Basic AMQ Broker Instance</a>.</p>
</li>
</ol>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="lab-deploying-a-basic-amq-broker-instance.html">Lab: Deploying a Basic AMQ Broker Instance</a></span>
  <span class="next"><a href="lab-implementing-basic-security-encryption-rbac.html">Lab: Implementing Basic Security (Encryption, RBAC)</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
