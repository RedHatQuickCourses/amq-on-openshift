<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Developing Producers and Consumers with Java Core Protocol :: AMQ Broker on OpenShift: Deployment and Management</title>
    <link rel="prev" href="setting-up-a-core-protocol-client-development-environment.html">
    <link rel="next" href="implementing-point-to-point-messaging.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">AMQ Broker on OpenShift: Deployment and Management</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-on-openshift" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../overview-of-message-oriented-middleware/overview-of-message-oriented-middleware.html">Overview of Message-Oriented Middleware</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/introduction-to-message-oriented-middleware-mom.html">Introduction to Message-Oriented Middleware (MOM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/benefits-and-use-cases-of-asynchronous-messaging.html">Benefits and Use Cases of Asynchronous Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/core-concepts-producers-consumers-queues-topics.html">Core Concepts: Producers, Consumers, Queues, Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/common-messaging-patterns-point-to-point-publishsubscribe.html">Common Messaging Patterns</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-overview/amq-broker-overview.html">AMQ Broker Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/introduction-to-red-hat-amq-broker.html">Introduction to Red Hat AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/foundations-in-apache-activemq-artemis.html">Foundations in Apache ActiveMQ Artemis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/key-features-and-capabilities.html">Key Features and Capabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/supported-messaging-protocols-jms-amqp-mqtt-stomp-openwire.html">Supported Messaging Protocols (JMS, AMQP, MQTT, STOMP, OpenWire)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/amq-broker-architecture.html">AMQ Broker Architecture</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/deploying-amq-broker-on-openshift.html">Deploying AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/openshift-container-platform-fundamentals-for-amq-broker.html">OpenShift Container Platform Fundamentals for AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/introduction-to-the-amq-broker-operator.html">Introduction to the AMQ Broker Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/installing-the-amq-broker-operator-via-cli-or-operatorhub.html">Installing the AMQ Broker Operator via CLI or OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/understanding-amq-broker-custom-resource-definitions-crds.html">understanding-amq-broker-custom-resource-definitions-crds.adoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/creating-and-managing-broker-instances-with-custom-resources-crs.html">Creating and Managing Broker Instances with Custom Resources (CRs)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/monitoring-initial-broker-deployment.html">Monitoring Initial Broker Deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/scaling-amq-broker-on-openshift.html">Scaling AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/concepts-of-horizontal-and-vertical-scaling.html">Concepts of Horizontal and Vertical Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/scaling-broker-pods-and-replicas.html">Scaling Broker Pods and Replicas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/adjusting-resource-allocations-cpu-memory-for-broker-pods.html">Adjusting Resource Allocations (CPU, Memory) for Broker Pods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/performance-considerations-for-scaling.html">Performance Considerations for Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/best-practices-for-scaling-in-openshift.html">Best Practices for Scaling AMQ Broker on OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../securing-amq-broker-on-openshift/securing-amq-broker-on-openshift.html">Securing AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/encrypting-connections.html">Encrypting Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-ssltls-for-client-broker-communication.html">Configuring SSL/TLS for Client-Broker Communication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/managing-certificates-and-trust-stores-on-openshift.html">Managing Certificates and Trust Stores on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-secure-listeners.html">Enabling Secure Listeners</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-rbac-role-based-access-control.html">Enabling RBAC (Role-Based Access Control)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/defining-users-roles-and-permissions-in-amq-broker.html">Defining Users, Roles, and Permissions in AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-with-openshift-authentication-mechanisms.html">Integrating with OpenShift Authentication Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-external-identity-providers-idp.html">Integrating External Identity Providers (IDP)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/overview-of-external-idp-integration-eg-ldap-keycloak.html">Overview of External IDP Integration (e.g., LDAP, Keycloak)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-amq-broker-for-external-idp-authentication.html">Configuring AMQ Broker for External Identity Provider (IDP) Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/mapping-external-roles-to-broker-roles.html">Mapping External Roles to Broker Roles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/amq-broker-high-availability-on-openshift.html">AMQ Broker High Availability on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/introduction-to-high-availability-ha-concepts.html">Introduction to High Availability (HA) Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/broker-clustering-strategies-shared-store-vs-replicated-live-backup.html">Broker Clustering Strategies: Shared Store vs. Replicated Live-Backup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/deploying-and-configuring-an-ha-broker-pair.html">Deploying and Configuring an HA Broker Pair</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/understanding-failover-and-recovery-mechanisms.html">Understanding Failover and Recovery Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/persistence-and-data-replication-for-ha.html">Persistence and Data Replication for HA</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/different-message-stores-for-amq-broker-on-openshift.html">Different Message Stores for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/overview-of-message-store-options.html">Overview of Message Store Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/file-based-message-store-configuration.html">File-Based Message Store Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/jdbc-message-store-integration-with-external-databases.html">JDBC Message Store Integration with External Databases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/journal-vs-paging-for-message-persistence.html">Journal vs. Paging for Message Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/choosing-the-appropriate-message-store-strategy.html">Choosing the Appropriate Message Store Strategy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/openshift-storage-considerations-persistent-volumes.html">Storage Considerations</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/accessing-management-console-for-amq-broker-on-openshift.html">Accessing Management Console for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/introduction-to-the-hawtio-management-console.html">Introduction to the Hawtio Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/exposing-the-console-via-openshift-routes.html">Exposing the Hawtio Management Console via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/authentication-and-authorization-for-console-access.html">Authentication and Authorization for AMQ Broker Management Console Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/monitoring-broker-metrics-queues-and-topics.html">Monitoring Broker Metrics, Queues, and Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/performing-administrative-tasks-through-the-console.html">Performing Administrative Tasks through the Console</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/enabling-external-access-to-brokers-deployed-on-openshift.html">Enabling External Access to Brokers Deployed on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/openshift-networking-concepts-services-routes-ingress.html">OpenShift Networking Concepts: Services, Routes, Ingress</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/exposing-broker-listeners-via-openshift-routes.html">Exposing Broker Listeners via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/configuring-client-connections-for-external-access.html">Configuring Client Connections for External Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/security-implications-and-best-practices-for-external-access.html">Securing External Access to AMQ Broker on OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="core-protocol-client-examples.html">Core Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="introduction-to-amq-core-protocol.html">Introduction to AMQ Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setting-up-a-core-protocol-client-development-environment.html">Setting Up a Core Protocol Client Development Environment</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="developing-producers-and-consumers-with-java-core-protocol.html">Developing Producers and Consumers with Java Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="implementing-point-to-point-messaging.html">Implementing Point-to-Point Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="implementing-publishsubscribe-messaging.html">Implementing Publish/Subscribe Messaging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amqp-protocol-client-examples/amqp-protocol-client-examples.html">AMQP Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/introduction-to-amqp-10-standard.html">Introduction to AMQP 1.0 Standard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/setting-up-an-amqp-client-development-environment-eg-qpid-jms.html">Setting Up an AMQP Client Development Environment (e.g., Qpid JMS)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/developing-producers-and-consumers-with-amqp-clients-eg-java-python.html">Developing Producers and Consumers with AMQP Clients (e.g., Java, Python)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/connecting-to-amq-broker-using-amqp.html">Connecting to AMQ Broker using AMQP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/exploring-advanced-amqp-features.html">Exploring Advanced AMQP Features</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/hands-on-lab-deploying-and-managing-amq-broker.html">Hands-on Lab: Deploying and Managing AMQ Broker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-deploying-a-basic-amq-broker-instance.html">Lab: Deploying a Basic AMQ Broker Instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-configuring-external-access-and-testing-client-connectivity.html">Lab: Configuring External Access and Testing Client Connectivity</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-implementing-basic-security-encryption-rbac.html">Lab: Implementing Basic Security (Encryption, RBAC)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-deploying-an-ha-broker-cluster.html">Lab: Deploying an HA Broker Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-monitoring-with-the-management-console.html">Lab: Monitoring with the Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-developing-and-testing-core-protocol-and-amqp-clients.html">Lab: Developing and Testing Core Protocol and AMQP Clients</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">AMQ Broker on OpenShift: Deployment and Management</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></li>
    <li><a href="core-protocol-client-examples.html">Core Protocol Client Examples</a></li>
    <li><a href="developing-producers-and-consumers-with-java-core-protocol.html">Developing Producers and Consumers with Java Core Protocol</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Developing Producers and Consumers with Java Core Protocol</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This section provides a comprehensive guide to developing message producers and consumers using the Red Hat AMQ Core Protocol JMS client library (built upon Apache ActiveMQ Artemis JMS client). You will gain a deep understanding of the fundamental components involved and learn how to implement them in practical, hands-on Java applications to interact with an AMQ Broker deployed on OpenShift.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_understanding_core_protocol_client_fundamentals"><a class="anchor" href="#_understanding_core_protocol_client_fundamentals"></a>Understanding Core Protocol Client Fundamentals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Red Hat AMQ Core Protocol JMS client enables Java applications to communicate with the AMQ Broker using its native, high-performance wire format. At the heart of message-oriented middleware (MOM) lies the interaction between entities that send messages (producers) and entities that receive them (consumers).</p>
</div>
<div class="paragraph">
<p>To effectively develop a Java Core Protocol client, it&#8217;s crucial to understand the purpose and interaction of its key components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ConnectionFactory</strong>: As the initial point of contact, the <code>ConnectionFactory</code> is responsible for creating connections to the AMQ Broker. It encapsulates connection configuration details, such as the broker&#8217;s network address (host and port) and SSL/TLS settings. For the Core Protocol JMS client, you typically use the <code>ActiveMQJMSClient.createConnectionFactory()</code> method to instantiate it.</p>
</li>
<li>
<p><strong>Connection</strong>: Represents an active, live connection between the client application and the AMQ Broker. Establishing a connection is a relatively resource-intensive operation, so in well-designed applications, <code>Connection</code> objects are typically created once and then reused throughout the application&#8217;s lifecycle.</p>
</li>
<li>
<p><strong>Session</strong>: A <code>Session</code> provides a single-threaded context for producing and consuming messages. It acts as a factory for <code>MessageProducer</code> and <code>MessageConsumer</code> objects and can also support transactional operations. Multiple sessions can be created from a single <code>Connection</code>, allowing for concurrent message processing within the same application.</p>
</li>
<li>
<p><strong>Destination</strong>: This abstract concept refers to the named location where messages are sent or from which they are received. In JMS, <code>Destination</code> can be specialized into:</p>
</li>
<li>
<p><strong>Queue</strong>: Represents a point-to-point messaging destination, where each message sent to the queue is typically delivered to <strong>only one</strong> consumer. Messages are stored in order until consumed.</p>
</li>
<li>
<p><strong>Topic</strong>: Represents a publish/subscribe messaging destination, where each message sent to the topic can be delivered to <strong>all active subscribers</strong> interested in that topic.</p>
</li>
<li>
<p><strong>MessageProducer</strong>: An object created by a <code>Session</code> that an application uses to send messages to a specific <code>Destination</code> (either a <code>Queue</code> or a <code>Topic</code>).</p>
</li>
<li>
<p><strong>MessageConsumer</strong>: An object created by a <code>Session</code> that an application uses to receive messages from a specific <code>Destination</code>. Consumers can be configured to filter messages or receive them asynchronously.</p>
</li>
<li>
<p><strong>Message</strong>: This is the actual payload or application-specific data that is transmitted between the producer and consumer. JMS supports various message types, including <code>TextMessage</code> (for string data), <code>BytesMessage</code> (for raw byte arrays), <code>MapMessage</code>, <code>ObjectMessage</code>, and <code>StreamMessage</code>, offering flexibility for different data formats.</p>
</li>
</ul>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="core-protocol-components.png" alt="Core Protocol Client Components" width="600" height="400">
</div>
<div class="title">Figure 1. The relationship between ConnectionFactory, Connection, Session, Producer, and Consumer</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As highlighted in the provided context, the Core Protocol JMS client library allows for advanced features like flow control. You can configure <code>ConnectionFactory</code> properties such as <code>setConsumerWindowSize()</code> and <code>setProducerWindowSize()</code> to regulate the flow of messages and prevent resource exhaustion, especially in scenarios with varying producer and consumer speeds. For basic examples, default settings are often sufficient, but for performance-critical or high-volume applications, understanding and tuning these settings is crucial.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hands_on_activity_developing_a_core_protocol_producer_and_consumer"><a class="anchor" href="#_hands_on_activity_developing_a_core_protocol_producer_and_consumer"></a>Hands-on Activity: Developing a Core Protocol Producer and Consumer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this activity, you will set up a basic Maven project, incorporate the necessary AMQ Core Protocol JMS client dependency, and then develop separate Java applications to act as a message producer and a message consumer. These applications will demonstrate how to send and receive messages from an AMQ Broker deployed on OpenShift.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h3>
<div class="paragraph">
<p>Before proceeding with this lab, ensure you have the following in place:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A running AMQ Broker instance on OpenShift. Refer to the "Deploying a Basic AMQ Broker Instance" lab if you need to set one up.</p>
</li>
<li>
<p>External access configured for your AMQ Broker, specifically for the Core Protocol, and you have the accessible hostname and port of its OpenShift Route.</p>
</li>
<li>
<p>Java Development Kit (JDK) 11 or later installed on your development machine.</p>
</li>
<li>
<p>Apache Maven installed.</p>
</li>
<li>
<p>A Java Integrated Development Environment (IDE) such as VS Code, IntelliJ IDEA, or Eclipse (optional, but recommended).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_step_1_create_a_maven_project"><a class="anchor" href="#_step_1_create_a_maven_project"></a>Step 1: Create a Maven Project</h3>
<div class="paragraph">
<p>Begin by setting up a new Maven project structure for your client applications.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open your terminal or command prompt and create a new directory for your project:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir amq-core-java-client
cd amq-core-java-client</code></pre>
</div>
</div>
</li>
<li>
<p>Initialize a basic Maven project using the <code>mvn archetype:generate</code> command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn archetype:generate -DgroupId=com.redhat.amq.core -DartifactId=amq-core-java-client -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command creates a standard Maven project structure within the <code>amq-core-java-client</code> directory.</p>
</div>
</li>
<li>
<p>Navigate into the newly created project directory:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd amq-core-java-client</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_add_amq_core_protocol_jms_dependency"><a class="anchor" href="#_step_2_add_amq_core_protocol_jms_dependency"></a>Step 2: Add AMQ Core Protocol JMS Dependency</h3>
<div class="paragraph">
<p>Next, you need to add the required client library dependency to your project&#8217;s <code>pom.xml</code> file.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <code>amq-core-java-client/pom.xml</code> file in your preferred text editor or IDE.</p>
</li>
<li>
<p>Locate the <code>&lt;dependencies&gt;</code> section and add the following <code>&lt;dependency&gt;</code> entry. Also, add a <code>&lt;properties&gt;</code> section to manage the AMQ client version and <code>maven-compiler-plugin</code> configuration for better project management. Finally, add the Red Hat Maven repository and <code>exec-maven-plugin</code> configuration to easily run your main classes.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.redhat.amq.core&lt;/groupId&gt;
  &lt;artifactId&gt;amq-core-java-client&lt;/artifactId&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;name&gt;amq-core-java-client&lt;/name&gt;
  &lt;url&gt;http://maven.apache.org&lt;/url&gt;

  &lt;properties&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt; <i class="conum" data-value="1"></i><b>(1)</b>
    &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt; <i class="conum" data-value="1"></i><b>(1)</b>
    &lt;amq.version&gt;2.31.0.redhat-00001&lt;/amq.version&gt; <i class="conum" data-value="2"></i><b>(2)</b>
  &lt;/properties&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;
      &lt;artifactId&gt;artemis-jms-client-all&lt;/artifactId&gt;
      &lt;version&gt;${amq.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- Keep existing test dependencies or add others as needed --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;3.8.1&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.8.1&lt;/version&gt;
        &lt;configuration&gt;
          &lt;source&gt;${maven.compiler.source}&lt;/source&gt;
          &lt;target&gt;${maven.compiler.target}&lt;/target&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
        &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.0.0&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;java&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;mainClass&gt;${main.class}&lt;/mainClass&gt; <i class="conum" data-value="3"></i><b>(3)</b>
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;

  &lt;repositories&gt; <i class="conum" data-value="4"></i><b>(4)</b>
    &lt;repository&gt;
      &lt;id&gt;redhat-ga&lt;/id&gt;
      &lt;name&gt;Red Hat General Availability Repository&lt;/name&gt;
      &lt;url&gt;https://maven.repository.redhat.com/ga/&lt;/url&gt;
    &lt;/repository&gt;
  &lt;/repositories&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Sets the Java compiler source and target versions to 11. Adjust if you are using a different JDK version.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the version of the <code>artemis-jms-client-all</code> dependency. This version (e.g., <code>2.31.0.redhat-00001</code>) is typically compatible with AMQ Broker 7.12+. <strong>Ensure this matches the version recommended for your AMQ Broker deployment.</strong></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Configures the <code>exec-maven-plugin</code>, allowing you to conveniently run your Java <code>main</code> classes directly from the command line using <code>mvn exec:java -Dmain.class=YourClassName</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Adds the Red Hat General Availability Maven repository, which is necessary to resolve Red Hat-specific AMQ client artifacts.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the <code>pom.xml</code> file.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_3_develop_the_message_producer"><a class="anchor" href="#_step_3_develop_the_message_producer"></a>Step 3: Develop the Message Producer</h3>
<div class="paragraph">
<p>Now, create a Java class that will instantiate the necessary JMS components to connect to the broker and send a text message to a queue.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new file named <code>Producer.java</code> in the <code>src/main/java/com/redhat/amq/core/</code> directory with the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.amq.core;

import org.apache.activemq.artemis.jms.client.ActiveMQJMSClient;
import org.apache.activemq.artemis.api.core.TransportConfiguration;
import org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnectorFactory;

import javax.jms.Connection;
import javax.jms.ConnectionFactory;
import javax.jms.Destination;
import javax.jms.JMSException;
import javax.jms.MessageProducer;
import javax.jms.Session;
import javax.jms.TextMessage;

public class Producer {

    // Default connection parameters, override with system properties for your environment
    private static final String BROKER_HOST = System.getProperty("broker.host", "broker-amq-broker-core-protocol-external-route-amq-broker.apps.cluster.example.com"); <i class="conum" data-value="1"></i><b>(1)</b>
    private static final int BROKER_PORT = Integer.parseInt(System.getProperty("broker.port", "443")); <i class="conum" data-value="2"></i><b>(2)</b>
    private static final String BROKER_USER = System.getProperty("broker.user", "developer"); <i class="conum" data-value="3"></i><b>(3)</b>
    private static final String BROKER_PASSWORD = System.getProperty("broker.password", "password"); <i class="conum" data-value="4"></i><b>(4)</b>
    private static final String QUEUE_NAME = "exampleQueue"; <i class="conum" data-value="5"></i><b>(5)</b>

    public static void main(String[] args) throws JMSException {
        Connection connection = null;
        Session session = null;

        try {
            // Step 1: Create a ConnectionFactory
            // For Core Protocol, especially with OpenShift Routes, we use TransportConfiguration
            // to specify connection details including SSL/TLS settings.
            TransportConfiguration transportConfiguration = new TransportConfiguration(
                NettyConnectorFactory.class.getName(),
                new java.util.HashMap&lt;String, Object&gt;() {{
                    put("host", BROKER_HOST);
                    put("port", BROKER_PORT);
                    put("sslEnabled", true); <i class="conum" data-value="6"></i><b>(6)</b>
                }}
            );
            ConnectionFactory connectionFactory = ActiveMQJMSClient.createConnectionFactoryWithoutHA(transportConfiguration);

            // If you are connecting to a non-SSL/TLS endpoint (less common for external OpenShift routes),
            // you might use a URI string:
            // ConnectionFactory connectionFactory = ActiveMQJMSClient.createConnectionFactory("tcp://" + BROKER_HOST + ":" + BROKER_PORT);

            // Step 2: Create a Connection to the Broker
            System.out.println("Connecting to broker at " + BROKER_HOST + ":" + BROKER_PORT);
            connection = connectionFactory.createConnection(BROKER_USER, BROKER_PASSWORD);
            connection.start(); // Connections must be started before use

            // Step 3: Create a Session
            // Arguments: transacted (false = no explicit transaction), acknowledgeMode (AUTO_ACKNOWLEDGE = broker acknowledges messages automatically)
            session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

            // Step 4: Create a Destination (Queue)
            Destination queue = session.createQueue(QUEUE_NAME);

            // Step 5: Create a MessageProducer for the destination
            MessageProducer producer = session.createProducer(queue);

            // Step 6: Create and send a Message
            TextMessage message = session.createTextMessage("Hello from AMQ Core Producer! Timestamp: " + System.currentTimeMillis());
            producer.send(message); // Send the message to the queue

            System.out.println("Successfully sent message: '" + message.getText() + "' to queue: " + QUEUE_NAME);

        } catch (Exception e) {
            System.err.println("Error encountered while sending message: " + e.getMessage());
            e.printStackTrace();
        } finally {
            // Step 7: Ensure resources are closed in a finally block
            if (session != null) {
                try {
                    session.close();
                } catch (JMSException e) {
                    System.err.println("Error closing session: " + e.getMessage());
                }
            }
            if (connection != null) {
                try {
                    connection.close();
                } catch (JMSException e) {
                    System.err.println("Error closing connection: " + e.getMessage());
                }
            }
            System.out.println("Producer application finished.");
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>IMPORTANT</strong>: Replace <code>broker-amq-broker-core-protocol-external-route-amq-broker.apps.cluster.example.com</code> with the actual hostname of your AMQ Broker&#8217;s external route for Core Protocol. You can obtain this from your OpenShift console or by using <code>oc get route -n &lt;your-namespace&gt;</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use <code>443</code> for HTTPS/SSL-enabled routes, which is the common practice for external OpenShift routes. Adjust if your route exposes a different port.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Replace <code>developer</code> with the username configured for accessing your AMQ Broker.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Replace <code>password</code> with the password associated with the specified user.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The name of the queue that both the producer and consumer will use. Ensure this queue exists or is configured to be auto-created on the broker.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Set to <code>true</code> if your OpenShift route for Core Protocol uses SSL/TLS (HTTPS), which is the default and recommended for external access.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Save the <code>Producer.java</code> file.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_4_develop_the_message_consumer"><a class="anchor" href="#_step_4_develop_the_message_consumer"></a>Step 4: Develop the Message Consumer</h3>
<div class="paragraph">
<p>Next, create a Java class that will establish a connection to the broker and then receive a message from the same queue.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new file named <code>Consumer.java</code> in the <code>src/main/java/com/redhat/amq/core/</code> directory with the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.redhat.amq.core;

import org.apache.activemq.artemis.jms.client.ActiveMQJMSClient;
import org.apache.activemq.artemis.api.core.TransportConfiguration;
import org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnectorFactory;

import javax.jms.Connection;
import javax.jms.ConnectionFactory;
import javax.jms.Destination;
import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.MessageConsumer;
import javax.jms.Session;
import javax.jms.TextMessage;

public class Consumer {

    // Default connection parameters, override with system properties for your environment
    private static final String BROKER_HOST = System.getProperty("broker.host", "broker-amq-broker-core-protocol-external-route-amq-broker.apps.cluster.example.com");
    private static final int BROKER_PORT = Integer.parseInt(System.getProperty("broker.port", "443"));
    private static final String BROKER_USER = System.getProperty("broker.user", "developer");
    private static final String BROKER_PASSWORD = System.getProperty("broker.password", "password");
    private static final String QUEUE_NAME = "exampleQueue";

    public static void main(String[] args) throws JMSException, InterruptedException {
        Connection connection = null;
        Session session = null;

        try {
            // Step 1: Create a ConnectionFactory (same as producer)
            TransportConfiguration transportConfiguration = new TransportConfiguration(
                NettyConnectorFactory.class.getName(),
                new java.util.HashMap&lt;String, Object&gt;() {{
                    put("host", BROKER_HOST);
                    put("port", BROKER_PORT);
                    put("sslEnabled", true);
                }}
            );
            ConnectionFactory connectionFactory = ActiveMQJMSClient.createConnectionFactoryWithoutHA(transportConfiguration);

            // Step 2: Create a Connection
            System.out.println("Connecting to broker at " + BROKER_HOST + ":" + BROKER_PORT);
            connection = connectionFactory.createConnection(BROKER_USER, BROKER_PASSWORD);
            connection.start(); // Connections must be started before use

            // Step 3: Create a Session
            session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

            // Step 4: Create a Destination (Queue)
            Destination queue = session.createQueue(QUEUE_NAME);

            // Step 5: Create a MessageConsumer for the destination
            MessageConsumer consumer = session.createConsumer(queue);

            System.out.println("Waiting for messages on queue: " + QUEUE_NAME + " (timeout: 10 seconds)");

            // Step 6: Receive a Message
            // consumer.receive(timeout) blocks until a message arrives or the timeout expires.
            // Other options: receive() blocks indefinitely, receiveNoWait() returns immediately.
            Message message = consumer.receive(10000); // Wait up to 10 seconds for a message

            if (message instanceof TextMessage) {
                TextMessage textMessage = (TextMessage) message;
                System.out.println("Received message: '" + textMessage.getText() + "'");
            } else if (message == null) {
                System.out.println("No message received within the specified timeout.");
            } else {
                System.out.println("Received a non-text message of type: " + message.getClass().getName());
            }

        } catch (Exception e) {
            System.err.println("Error encountered while receiving message: " + e.getMessage());
            e.printStackTrace();
        } finally {
            // Step 7: Ensure resources are closed
            if (session != null) {
                try {
                    session.close();
                } catch (JMSException e) {
                    System.err.println("Error closing session: " + e.getMessage());
                }
            }
            if (connection != null) {
                try {
                    connection.close();
                } catch (JMSException e) {
                    System.err.println("Error closing connection: " + e.getMessage());
                }
            }
            System.out.println("Consumer application finished.");
        }
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Save the <code>Consumer.java</code> file.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_5_build_and_run_the_client_applications"><a class="anchor" href="#_step_5_build_and_run_the_client_applications"></a>Step 5: Build and Run the Client Applications</h3>
<div class="paragraph">
<p>Now, you will compile your Java project and then run the producer and consumer applications from separate terminal windows to observe message exchange.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open your terminal in the <code>amq-core-java-client</code> project root and compile your Java project:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn clean install</code></pre>
</div>
</div>
</li>
<li>
<p>Open <strong>two separate terminal windows</strong> (or tabs). One will be for the consumer, and the other for the producer.</p>
</li>
<li>
<p>In the <strong>first terminal window</strong>, run the <code>Consumer</code> application:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn exec:java -Dmain.class="com.redhat.amq.core.Consumer" \
  -Dbroker.host="&lt;YOUR_BROKER_CORE_PROTOCOL_ROUTE_HOSTNAME&gt;" \
  -Dbroker.port="443" \
  -Dbroker.user="developer" \
  -Dbroker.password="password"</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Remember to replace <code>&lt;YOUR_BROKER_CORE_PROTOCOL_ROUTE_HOSTNAME&gt;</code> with the actual hostname of your AMQ Broker&#8217;s Core Protocol route.</strong>
The consumer application will start, connect to the broker, and then wait for a message on the <code>exampleQueue</code>.</p>
</div>
</li>
<li>
<p>In the <strong>second terminal window</strong>, run the <code>Producer</code> application:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn exec:java -Dmain.class="com.redhat.amq.core.Producer" \
  -Dbroker.host="&lt;YOUR_BROKER_CORE_PROTOCOL_ROUTE_HOSTNAME&gt;" \
  -Dbroker.port="443" \
  -Dbroker.user="developer" \
  -Dbroker.password="password"</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Again, replace <code>&lt;YOUR_BROKER_CORE_PROTOCOL_ROUTE_HOSTNAME&gt;</code> with your broker&#8217;s actual Core Protocol route hostname.</strong>
The producer application will connect, send a message to <code>exampleQueue</code>, and then exit.</p>
</div>
</li>
<li>
<p>Observe the output in both terminals:</p>
<div class="paragraph">
<p>The Producer terminal should display output similar to this:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>[INFO] --- exec-maven-plugin:3.0.0:java (default-cli) @ amq-core-java-client ---
Connecting to broker at broker-amq-broker-core-protocol-external-route-amq-broker.apps.cluster.example.com:443
Successfully sent message: 'Hello from AMQ Core Producer! Timestamp: 1678886400000' to queue: exampleQueue
Producer application finished.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------</pre>
</div>
</div>
<div class="paragraph">
<p>+
The Consumer terminal should then show:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">[INFO] --- exec-maven-plugin:3.0.0:java (default-cli) @ amq-core-java-client ---
Connecting to broker at broker-amq-broker-core-protocol-external-route-amq-broker.apps.cluster.example.com:443
Waiting for messages on queue: exampleQueue (timeout: 10 seconds)
Received message: 'Hello from AMQ Core Producer! Timestamp: 1678886400000'
Consumer application finished.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations! You have successfully developed, compiled, and executed Java Core Protocol producer and consumer applications, demonstrating fundamental message sending and receiving capabilities with an AMQ Broker deployed on OpenShift.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_expert_insights_and_troubleshooting"><a class="anchor" href="#_expert_insights_and_troubleshooting"></a>Expert Insights and Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Developing robust messaging applications often involves more than just the basic send/receive pattern. Here are some expert insights and common troubleshooting tips for working with AMQ Core Protocol JMS clients:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Connection URL vs. TransportConfiguration</strong>: While simpler URI strings like <code>tcp://host:port</code> can be used with <code>ActiveMQJMSClient.createConnectionFactory()</code>, using <code>TransportConfiguration</code> directly (as demonstrated in the lab) offers finer-grained control, especially when dealing with advanced network settings, SSL/TLS, or custom connector parameters in an OpenShift environment.</p>
</li>
<li>
<p><strong>SSL/TLS Handshake Failures (<code>javax.net.ssl.SSLHandshakeException</code>)</strong>:</p>
</li>
<li>
<p><strong>Verify <code>sslEnabled</code></strong>: Ensure that <code>sslEnabled</code> is set to <code>true</code> in your <code>TransportConfiguration</code> if your OpenShift route for Core Protocol is serving over HTTPS/TLS.</p>
</li>
<li>
<p><strong>Certificate Trust</strong>: For routes using self-signed certificates (common in development environments) or certificates from a custom issuer, your Java client&#8217;s trust store might not inherently trust the broker&#8217;s certificate. You might need to import the Certificate Authority (CA) certificate into your client&#8217;s Java Key Store (<code>cacerts</code>) or configure a custom trust store for your JVM.</p>
</li>
<li>
<p><strong>Hostname Verification</strong>: The hostname used in <code>BROKER_HOST</code> <strong>must</strong> match the Common Name (CN) or a Subject Alternative Name (SAN) in the broker&#8217;s SSL/TLS certificate to prevent hostname verification errors.</p>
</li>
<li>
<p><strong>Authentication and Authorization Issues</strong>:</p>
</li>
<li>
<p><strong>Credentials</strong>: Double-check the <code>BROKER_USER</code> and <code>BROKER_PASSWORD</code> values. These must be valid credentials configured on your AMQ Broker instance.</p>
</li>
<li>
<p><strong>Permissions</strong>: Ensure the authenticated user has the necessary permissions (defined via RBAC on the broker) to connect, create sessions, and send/receive messages from the specified <code>QUEUE_NAME</code>.</p>
</li>
<li>
<p><strong>Resource Management</strong>: Always close <code>Connection</code>, <code>Session</code>, <code>MessageProducer</code>, and <code>MessageConsumer</code> objects in a <code>finally</code> block to guarantee that resources are released, even if exceptions occur. Failing to do so can lead to resource leaks and instability.</p>
</li>
<li>
<p><strong>Asynchronous Message Consumption</strong>: For production-grade applications that need to process messages continuously without blocking the main thread, implement an asynchronous message consumer using <code>MessageListener</code>. The <code>MessageListener</code> interface allows you to define a callback method (<code>onMessage()</code>) that is invoked automatically when a message arrives.</p>
</li>
<li>
<p><strong>Message Acknowledgement</strong>: In our example, <code>Session.AUTO_ACKNOWLEDGE</code> was used. Other acknowledgement modes like <code>CLIENT_ACKNOWLEDGE</code> (client is responsible for explicitly acknowledging messages) or <code>DUPS_OK_ACKNOWLEDGE</code> (lazy acknowledgement, potentially accepting duplicates) offer different trade-offs in terms of reliability and performance.</p>
</li>
<li>
<p><strong>Flow Control (<code>ConsumerWindowSize</code>, <code>ProducerWindowSize</code>)</strong>: As noted earlier, these settings are crucial for managing message flow between the client and broker. If a producer is significantly faster than a consumer, the broker or the consumer can become overwhelmed. Configuring appropriate window sizes on the <code>ConnectionFactory</code> can mitigate this by throttling producers or consumers. Refer to the "Flow Control" chapter in the official <code>Red Hat AMQ Core Protocol JMS</code> documentation for detailed guidance.</p>
</li>
<li>
<p><strong>Error Handling and Retries</strong>: Real-world applications should incorporate robust error handling, including retry mechanisms with exponential backoff for transient network issues or temporary broker unavailability.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="setting-up-a-core-protocol-client-development-environment.html">Setting Up a Core Protocol Client Development Environment</a></span>
  <span class="next"><a href="implementing-point-to-point-messaging.html">Implementing Point-to-Point Messaging</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
