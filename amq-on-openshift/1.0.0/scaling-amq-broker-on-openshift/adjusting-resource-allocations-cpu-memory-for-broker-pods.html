<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Adjusting Resource Allocations (CPU, Memory) for Broker Pods :: AMQ Broker on OpenShift: Deployment and Management</title>
    <link rel="prev" href="scaling-broker-pods-and-replicas.html">
    <link rel="next" href="performance-considerations-for-scaling.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">AMQ Broker on OpenShift: Deployment and Management</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-on-openshift" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../overview-of-message-oriented-middleware/overview-of-message-oriented-middleware.html">Overview of Message-Oriented Middleware</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/introduction-to-message-oriented-middleware-mom.html">Introduction to Message-Oriented Middleware (MOM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/benefits-and-use-cases-of-asynchronous-messaging.html">Benefits and Use Cases of Asynchronous Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/core-concepts-producers-consumers-queues-topics.html">Core Concepts: Producers, Consumers, Queues, Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/common-messaging-patterns-point-to-point-publishsubscribe.html">Common Messaging Patterns (Point-to-Point, Publish/Subscribe)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-overview/amq-broker-overview.html">AMQ Broker Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/introduction-to-red-hat-amq-broker.html">Introduction to Red Hat AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/foundations-in-apache-activemq-artemis.html">Foundations in Apache ActiveMQ Artemis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/key-features-and-capabilities.html">Key Features and Capabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/supported-messaging-protocols-jms-amqp-mqtt-stomp-openwire.html">Supported Messaging Protocols (JMS, AMQP, MQTT, STOMP, OpenWire)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/amq-broker-architecture.html">AMQ Broker Architecture</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/deploying-amq-broker-on-openshift.html">Deploying AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/openshift-container-platform-fundamentals-for-amq-broker.html">OpenShift Container Platform Fundamentals for AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/introduction-to-the-amq-broker-operator.html">Introduction to the AMQ Broker Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/installing-the-amq-broker-operator-via-cli-or-operatorhub.html">Installing the AMQ Broker Operator via CLI or OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/understanding-amq-broker-custom-resource-definitions-crds.html">Understanding AMQ Broker Custom Resource Definitions (CRDs)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/creating-and-managing-broker-instances-with-custom-resources-crs.html">Creating and Managing Broker Instances with Custom Resources (CRs)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/monitoring-initial-broker-deployment.html">Monitoring Initial Broker Deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="scaling-amq-broker-on-openshift.html">Scaling AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="concepts-of-horizontal-and-vertical-scaling.html">Concepts of Horizontal and Vertical Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="scaling-broker-pods-and-replicas.html">Scaling Broker Pods and Replicas</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="adjusting-resource-allocations-cpu-memory-for-broker-pods.html">Adjusting Resource Allocations (CPU, Memory) for Broker Pods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="performance-considerations-for-scaling.html">Performance Considerations for Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="best-practices-for-scaling-in-openshift.html">Best Practices for Scaling in OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../securing-amq-broker-on-openshift/securing-amq-broker-on-openshift.html">Securing AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/encrypting-connections.html">Encrypting Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-ssltls-for-client-broker-communication.html">Configuring SSL/TLS for Client-Broker Communication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/managing-certificates-and-trust-stores-on-openshift.html">Managing Certificates and Trust Stores on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-secure-listeners.html">Enabling Secure Listeners</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-rbac-role-based-access-control.html">Enabling RBAC (Role-Based Access Control)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/defining-users-roles-and-permissions-in-amq-broker.html">Defining Users, Roles, and Permissions in AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-with-openshift-authentication-mechanisms.html">Integrating with OpenShift Authentication Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-external-identity-providers-idp.html">Integrating External Identity Providers (IDP)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/overview-of-external-idp-integration-eg-ldap-keycloak.html">Overview of External IDP Integration (e.g., LDAP, Keycloak)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-amq-broker-for-external-idp-authentication.html">Configuring AMQ Broker for External IDP Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/mapping-external-roles-to-broker-roles.html">Mapping External Roles to Broker Roles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/amq-broker-high-availability-on-openshift.html">AMQ Broker High Availability on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/introduction-to-high-availability-ha-concepts.html">Introduction to High Availability (HA) Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/broker-clustering-strategies-shared-store-vs-replicated-live-backup.html">Broker Clustering Strategies: Shared Store vs. Replicated Live-Backup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/deploying-and-configuring-an-ha-broker-pair.html">Deploying and Configuring an HA Broker Pair</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/understanding-failover-and-recovery-mechanisms.html">Understanding Failover and Recovery Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/persistence-and-data-replication-for-ha.html">Persistence and Data Replication for HA</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/different-message-stores-for-amq-broker-on-openshift.html">Different Message Stores for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/overview-of-message-store-options.html">Overview of Message Store Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/file-based-message-store-configuration.html">File-Based Message Store Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/jdbc-message-store-integration-with-external-databases.html">JDBC Message Store Integration with External Databases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/journal-vs-paging-for-message-persistence.html">Journal vs. Paging for Message Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/choosing-the-appropriate-message-store-strategy.html">Choosing the Appropriate Message Store Strategy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/openshift-storage-considerations-persistent-volumes.html">OpenShift Storage Considerations (Persistent Volumes)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/accessing-management-console-for-amq-broker-on-openshift.html">Accessing Management Console for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/introduction-to-the-hawtio-management-console.html">Introduction to the Hawtio Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/exposing-the-console-via-openshift-routes.html">Exposing the Console via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/authentication-and-authorization-for-console-access.html">Authentication and Authorization for Console Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/monitoring-broker-metrics-queues-and-topics.html">Monitoring Broker Metrics, Queues, and Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/performing-administrative-tasks-through-the-console.html">Performing Administrative Tasks through the Console</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/enabling-external-access-to-brokers-deployed-on-openshift.html">Enabling External Access to Brokers Deployed on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/openshift-networking-concepts-services-routes-ingress.html">OpenShift Networking Concepts: Services, Routes, Ingress</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/exposing-broker-listeners-via-openshift-routes.html">Exposing Broker Listeners via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/configuring-client-connections-for-external-access.html">Configuring Client Connections for External Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/security-implications-and-best-practices-for-external-access.html">Security Implications and Best Practices for External Access</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core-protocol-client-examples/core-protocol-client-examples.html">Core Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/introduction-to-amq-core-protocol.html">Introduction to AMQ Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/setting-up-a-core-protocol-client-development-environment.html">Setting Up a Core Protocol Client Development Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/developing-producers-and-consumers-with-java-core-protocol.html">Developing Producers and Consumers with Java Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/implementing-point-to-point-messaging.html">Implementing Point-to-Point Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/implementing-publishsubscribe-messaging.html">Implementing Publish/Subscribe Messaging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amqp-protocol-client-examples/amqp-protocol-client-examples.html">AMQP Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/introduction-to-amqp-10-standard.html">Introduction to AMQP 1.0 Standard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/setting-up-an-amqp-client-development-environment-eg-qpid-jms.html">Setting Up an AMQP Client Development Environment (e.g., Qpid JMS)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/developing-producers-and-consumers-with-amqp-clients-eg-java-python.html">Developing Producers and Consumers with AMQP Clients (e.g., Java, Python)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/connecting-to-amq-broker-using-amqp.html">Connecting to AMQ Broker using AMQP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/exploring-advanced-amqp-features.html">Exploring Advanced AMQP Features</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/hands-on-lab-deploying-and-managing-amq-broker.html">Hands-on Lab: Deploying and Managing AMQ Broker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-deploying-a-basic-amq-broker-instance.html">Lab: Deploying a Basic AMQ Broker Instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-configuring-external-access-and-testing-client-connectivity.html">Lab: Configuring External Access and Testing Client Connectivity</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-implementing-basic-security-encryption-rbac.html">Lab: Implementing Basic Security (Encryption, RBAC)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-deploying-an-ha-broker-cluster.html">Lab: Deploying an HA Broker Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-monitoring-with-the-management-console.html">Lab: Monitoring with the Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-developing-and-testing-core-protocol-and-amqp-clients.html">Lab: Developing and Testing Core Protocol and AMQP Clients</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">AMQ Broker on OpenShift: Deployment and Management</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></li>
    <li><a href="scaling-amq-broker-on-openshift.html">Scaling AMQ Broker on OpenShift</a></li>
    <li><a href="adjusting-resource-allocations-cpu-memory-for-broker-pods.html">Adjusting Resource Allocations (CPU, Memory) for Broker Pods</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Adjusting Resource Allocations (CPU, Memory) for Broker Pods</h1>
<h1 id="_adjusting_resource_allocations_cpu_memory_for_broker_pods" class="sect0"><a class="anchor" href="#_adjusting_resource_allocations_cpu_memory_for_broker_pods"></a>Adjusting Resource Allocations (CPU, Memory) for Broker Pods</h1>
<div class="paragraph">
<p>This section details how to configure CPU and memory resource allocations for your AMQ Broker pods deployed on OpenShift. Properly setting these values is crucial for ensuring stable performance, efficient resource utilization, and predictable behavior of your messaging infrastructure.</p>
</div>
<div class="sect1">
<h2 id="_understanding_resource_requests_and_limits"><a class="anchor" href="#_understanding_resource_requests_and_limits"></a>Understanding Resource Requests and Limits</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On OpenShift, resource management for containers is controlled through <code>requests</code> and <code>limits</code> for CPU and memory. These configurations guide the OpenShift scheduler and runtime environment on how to manage your broker pods.</p>
</div>
<div class="sect2">
<h3 id="_cpu_resource_management"><a class="anchor" href="#_cpu_resource_management"></a>CPU Resource Management</h3>
<div class="ulist">
<ul>
<li>
<p><code>requests.cpu</code>:: This value specifies the <strong>minimum</strong> amount of host-node CPU that each broker container requires to run. The OpenShift scheduler uses this value to determine which node can accommodate the broker pod. If a node doesn&#8217;t have at least this amount of available CPU, the pod will not be scheduled on it. CPU requests are typically measured in millicores (<code>m</code>), where <code>1000m</code> equals 1 full CPU core. For example, <code>"250m"</code> means 0.25 of a CPU core.</p>
</li>
<li>
<p><code>limits.cpu</code>:: This value defines the <strong>maximum</strong> amount of host-node CPU that each broker container can consume. If a broker container attempts to exceed this specified CPU limit, OpenShift will <strong>throttle</strong> the container. Throttling ensures that the container&#8217;s CPU usage does not impact other containers or the node&#8217;s overall stability. While useful for preventing resource hogging, consistent throttling can lead to performance degradation for the throttled application.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_memory_resource_management"><a class="anchor" href="#_memory_resource_management"></a>Memory Resource Management</h3>
<div class="ulist">
<ul>
<li>
<p><code>requests.memory</code>:: This value specifies the <strong>minimum</strong> amount of host-node memory that each broker container requires. Similar to CPU requests, the OpenShift scheduler uses this value to place the pod on a node that has at least this amount of available memory. Memory requests are typically measured in bytes, with common suffixes like <code>M</code> for megabytes or <code>G</code> for gigabytes. For example, <code>"512M"</code> means 512 megabytes.</p>
</li>
<li>
<p><code>limits.memory</code>:: This value defines the <strong>maximum</strong> amount of host-node memory that each broker container can consume. If a broker container attempts to exceed this memory limit, the OpenShift platform will terminate the container with an "Out Of Memory" (OOMKilled) error. This mechanism prevents a single misbehaving application from consuming all available memory on a node and causing instability for other services.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_important_considerations_for_resource_allocation"><a class="anchor" href="#_important_considerations_for_resource_allocation"></a>Important Considerations for Resource Allocation</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Default Behavior for Requests</strong>: If you specify <code>limits</code> for a resource but do not explicitly specify <code>requests</code>, the broker container will <strong>request</strong> the configured <code>limits</code> values for that resource. For instance, if you set <code>limits.cpu: "500m"</code> but omit <code>requests.cpu</code>, the broker will request <code>"500m"</code> CPU.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Set <code>limits</code> without <code>requests</code></div>
Always set <code>limits</code> without explicitly setting <code>requests</code> to precisely control the amount of memory and CPU requested. This practice also ensures that the same values are requested for each broker container, especially in deployments with multiple brokers. This helps maintain consistency and predictable scheduling behavior across your broker cluster.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Init Containers</strong>: The AMQ Broker Operator utilizes <strong>Init Containers</strong> during the initialization phase of each broker pod. Any resource <code>limits</code> and <code>requests</code> that you configure for the main broker container also apply to these Init Containers. This ensures that the initialization process itself is subject to the same resource constraints.</p>
</li>
<li>
<p><strong>Testing and Tuning</strong>: While general recommendations can be provided, the optimal resource allocations are highly dependent on your specific messaging use cases, message throughput, concurrency, and overall AMQ Broker architecture. It is <strong>strongly recommended</strong> that you thoroughly test and tune these values in a development or staging environment before applying them to your production environment. Misconfigured resources can lead to performance bottlenecks, instability, or inefficient resource utilization.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hands_on_activity_adjusting_resource_allocations_for_an_amq_broker_pod"><a class="anchor" href="#_hands_on_activity_adjusting_resource_allocations_for_an_amq_broker_pod"></a>Hands-on Activity: Adjusting Resource Allocations for an AMQ Broker Pod</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this activity, you will modify an existing AMQ Broker custom resource (CR) to adjust the CPU and memory allocations for its pods.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>An OpenShift cluster with the AMQ Broker Operator installed.</p>
</li>
<li>
<p>An existing AMQ Broker instance deployed via its custom resource.</p>
</li>
<li>
<p><code>oc</code> CLI configured and logged into your OpenShift cluster.</p>
</li>
<li>
<p>Basic understanding of YAML syntax.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_procedure_adjusting_broker_pod_resources"><a class="anchor" href="#_procedure_adjusting_broker_pod_resources"></a>Procedure: Adjusting Broker Pod Resources</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Identify your Broker Custom Resource</strong>:
First, list your existing <code>ActiveMQArtemis</code> custom resources to identify the one you want to modify.</p>
<div class="literalblock">
<div class="content">
<pre>```bash
oc get activemqartemis
```
You should see output similar to this:
```
NAME           AGE
my-broker      5m
```
In this example, our broker's CR name is `my-broker`.</pre>
</div>
</div>
</li>
<li>
<p><strong>Edit the Broker Custom Resource</strong>:
Use the <code>oc edit</code> command to open the custom resource for editing in your default editor (e.g., <code>vi</code> or <code>nano</code>).</p>
<div class="literalblock">
<div class="content">
<pre>```bash
oc edit activemqartemis my-broker
```</pre>
</div>
</div>
</li>
<li>
<p><strong>Modify the <code>deploymentPlan.resources</code> section</strong>:
Navigate to the <code>spec.deploymentPlan.resources</code> section within the YAML. You will add or modify the <code>limits</code> and <code>requests</code> for <code>cpu</code> and <code>memory</code>.</p>
<div class="literalblock">
<div class="content">
<pre>[IMPORTANT]
.Ensure Proper Indentation
YAML is sensitive to indentation. Ensure that your `resources` block is correctly indented under `deploymentPlan`.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Locate or add the `resources` block as shown below. For this example, we will set CPU limits to `500m` and memory limits to `1024M`. As per the recommendation, we will *not* explicitly set `requests` so they default to the `limits` values.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>```yaml
# ... existing CR content ...
spec:
  deploymentPlan:
    size: 1 # Assuming a single broker for simplicity, adjust as needed
    # ... other deploymentPlan configurations ...
    resources:
      limits:
        cpu: "500m"
        memory: "1024M"
    # If you wanted to explicitly set requests, it would look like this:
    # requests:
    #   cpu: "250m"
    #   memory: "512M"
# ... rest of CR content ...
```</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>In this configuration:
*   Each broker container will be limited to `500m` (half a CPU core).
*   Each broker container will be limited to `1024M` (1 GB) of memory.
*   Since `requests` are not specified, the broker will *request* `500m` CPU and `1024M` memory for scheduling purposes.</pre>
</div>
</div>
</li>
<li>
<p><strong>Save the Custom Resource</strong>:
Save and close the editor. The OpenShift Operator will detect the change in the <code>ActiveMQArtemis</code> custom resource and automatically reconcile the broker deployment, updating the underlying Pods with the new resource allocations. This typically involves terminating the existing broker pods and creating new ones with the updated specifications.</p>
</li>
<li>
<p><strong>Verify the Resource Allocations</strong>:
After a short period, verify that the new resource allocations have been applied to your broker pods.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Check Pod Status</strong>: Ensure the broker pod(s) are running.
<code><code>bash
oc get pods -l app.kubernetes.io/name=my-broker # Replace 'my-broker' with your broker name
</code></code></p>
</li>
<li>
<p><strong>Describe a Broker Pod</strong>: Get detailed information about one of the broker pods.
<code><code>bash
oc describe pod &lt;broker-pod-name&gt;
</code></code>
Look for the <code>Resources</code> section under the <code>Containers</code> details. You should see output similar to this, reflecting your changes:
<code>`
&#8230;&#8203;
Containers:
  amq-broker:
    Container ID:  &#8230;&#8203;
    Image:         &#8230;&#8203;
    Port:          61616/TCP
    Host Port:     0/TCP
    Limits:
      cpu:     500m
      memory:  1024M
    Requests:
      cpu:     500m
      memory:  1024M
&#8230;&#8203;
</code>`
Notice that <code>Requests</code> now matches <code>Limits</code> because we didn&#8217;t specify them explicitly.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>This concludes the process of adjusting CPU and memory resource allocations for your AMQ Broker pods on OpenShift. Remember to monitor your broker&#8217;s performance after making such changes to ensure optimal operation.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="scaling-broker-pods-and-replicas.html">Scaling Broker Pods and Replicas</a></span>
  <span class="next"><a href="performance-considerations-for-scaling.html">Performance Considerations for Scaling</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
