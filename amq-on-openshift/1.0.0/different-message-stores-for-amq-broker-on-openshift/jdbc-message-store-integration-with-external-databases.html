<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JDBC Message Store Integration with External Databases :: AMQ Broker on OpenShift: Deployment and Management</title>
    <link rel="prev" href="file-based-message-store-configuration.html">
    <link rel="next" href="journal-vs-paging-for-message-persistence.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">AMQ Broker on OpenShift: Deployment and Management</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-on-openshift" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../overview-of-message-oriented-middleware/overview-of-message-oriented-middleware.html">Overview of Message-Oriented Middleware</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/introduction-to-message-oriented-middleware-mom.html">Introduction to Message-Oriented Middleware (MOM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/benefits-and-use-cases-of-asynchronous-messaging.html">Benefits and Use Cases of Asynchronous Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/core-concepts-producers-consumers-queues-topics.html">Core Concepts: Producers, Consumers, Queues, Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/common-messaging-patterns-point-to-point-publishsubscribe.html">Common Messaging Patterns</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-overview/amq-broker-overview.html">AMQ Broker Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/introduction-to-red-hat-amq-broker.html">Introduction to Red Hat AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/foundations-in-apache-activemq-artemis.html">Foundations in Apache ActiveMQ Artemis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/key-features-and-capabilities.html">Key Features and Capabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/supported-messaging-protocols-jms-amqp-mqtt-stomp-openwire.html">Supported Messaging Protocols (JMS, AMQP, MQTT, STOMP, OpenWire)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/amq-broker-architecture.html">AMQ Broker Architecture</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/deploying-amq-broker-on-openshift.html">Deploying AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/openshift-container-platform-fundamentals-for-amq-broker.html">OpenShift Container Platform Fundamentals for AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/introduction-to-the-amq-broker-operator.html">Introduction to the AMQ Broker Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/installing-the-amq-broker-operator-via-cli-or-operatorhub.html">Installing the AMQ Broker Operator via CLI or OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/understanding-amq-broker-custom-resource-definitions-crds.html">understanding-amq-broker-custom-resource-definitions-crds.adoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/creating-and-managing-broker-instances-with-custom-resources-crs.html">Creating and Managing Broker Instances with Custom Resources (CRs)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/monitoring-initial-broker-deployment.html">Monitoring Initial Broker Deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/scaling-amq-broker-on-openshift.html">Scaling AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/concepts-of-horizontal-and-vertical-scaling.html">Concepts of Horizontal and Vertical Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/scaling-broker-pods-and-replicas.html">Scaling Broker Pods and Replicas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/adjusting-resource-allocations-cpu-memory-for-broker-pods.html">Adjusting Resource Allocations (CPU, Memory) for Broker Pods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/performance-considerations-for-scaling.html">Performance Considerations for Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/best-practices-for-scaling-in-openshift.html">Best Practices for Scaling AMQ Broker on OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../securing-amq-broker-on-openshift/securing-amq-broker-on-openshift.html">Securing AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/encrypting-connections.html">Encrypting Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-ssltls-for-client-broker-communication.html">Configuring SSL/TLS for Client-Broker Communication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/managing-certificates-and-trust-stores-on-openshift.html">Managing Certificates and Trust Stores on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-secure-listeners.html">Enabling Secure Listeners</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-rbac-role-based-access-control.html">Enabling RBAC (Role-Based Access Control)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/defining-users-roles-and-permissions-in-amq-broker.html">Defining Users, Roles, and Permissions in AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-with-openshift-authentication-mechanisms.html">Integrating with OpenShift Authentication Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-external-identity-providers-idp.html">Integrating External Identity Providers (IDP)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/overview-of-external-idp-integration-eg-ldap-keycloak.html">Overview of External IDP Integration (e.g., LDAP, Keycloak)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-amq-broker-for-external-idp-authentication.html">Configuring AMQ Broker for External Identity Provider (IDP) Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/mapping-external-roles-to-broker-roles.html">Mapping External Roles to Broker Roles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/amq-broker-high-availability-on-openshift.html">AMQ Broker High Availability on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/introduction-to-high-availability-ha-concepts.html">Introduction to High Availability (HA) Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/broker-clustering-strategies-shared-store-vs-replicated-live-backup.html">Broker Clustering Strategies: Shared Store vs. Replicated Live-Backup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/deploying-and-configuring-an-ha-broker-pair.html">Deploying and Configuring an HA Broker Pair</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/understanding-failover-and-recovery-mechanisms.html">Understanding Failover and Recovery Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/persistence-and-data-replication-for-ha.html">Persistence and Data Replication for HA</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="different-message-stores-for-amq-broker-on-openshift.html">Different Message Stores for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="overview-of-message-store-options.html">Overview of Message Store Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="file-based-message-store-configuration.html">File-Based Message Store Configuration</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="jdbc-message-store-integration-with-external-databases.html">JDBC Message Store Integration with External Databases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="journal-vs-paging-for-message-persistence.html">Journal vs. Paging for Message Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="choosing-the-appropriate-message-store-strategy.html">Choosing the Appropriate Message Store Strategy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="openshift-storage-considerations-persistent-volumes.html">Storage Considerations</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/accessing-management-console-for-amq-broker-on-openshift.html">Accessing Management Console for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/introduction-to-the-hawtio-management-console.html">Introduction to the Hawtio Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/exposing-the-console-via-openshift-routes.html">Exposing the Hawtio Management Console via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/authentication-and-authorization-for-console-access.html">Authentication and Authorization for AMQ Broker Management Console Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/monitoring-broker-metrics-queues-and-topics.html">Monitoring Broker Metrics, Queues, and Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/performing-administrative-tasks-through-the-console.html">Performing Administrative Tasks through the Console</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/enabling-external-access-to-brokers-deployed-on-openshift.html">Enabling External Access to Brokers Deployed on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/openshift-networking-concepts-services-routes-ingress.html">OpenShift Networking Concepts: Services, Routes, Ingress</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/exposing-broker-listeners-via-openshift-routes.html">Exposing Broker Listeners via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/configuring-client-connections-for-external-access.html">Configuring Client Connections for External Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enabling-external-access-to-brokers-deployed-on-openshift/security-implications-and-best-practices-for-external-access.html">Securing External Access to AMQ Broker on OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core-protocol-client-examples/core-protocol-client-examples.html">Core Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/introduction-to-amq-core-protocol.html">Introduction to AMQ Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/setting-up-a-core-protocol-client-development-environment.html">Setting Up a Core Protocol Client Development Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/developing-producers-and-consumers-with-java-core-protocol.html">Developing Producers and Consumers with Java Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/implementing-point-to-point-messaging.html">Implementing Point-to-Point Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/implementing-publishsubscribe-messaging.html">Implementing Publish/Subscribe Messaging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amqp-protocol-client-examples/amqp-protocol-client-examples.html">AMQP Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/introduction-to-amqp-10-standard.html">Introduction to AMQP 1.0 Standard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/setting-up-an-amqp-client-development-environment-eg-qpid-jms.html">Setting Up an AMQP Client Development Environment (e.g., Qpid JMS)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/developing-producers-and-consumers-with-amqp-clients-eg-java-python.html">Developing Producers and Consumers with AMQP Clients (e.g., Java, Python)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/connecting-to-amq-broker-using-amqp.html">Connecting to AMQ Broker using AMQP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/exploring-advanced-amqp-features.html">Exploring Advanced AMQP Features</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/hands-on-lab-deploying-and-managing-amq-broker.html">Hands-on Lab: Deploying and Managing AMQ Broker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-deploying-a-basic-amq-broker-instance.html">Lab: Deploying a Basic AMQ Broker Instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-configuring-external-access-and-testing-client-connectivity.html">Lab: Configuring External Access and Testing Client Connectivity</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-implementing-basic-security-encryption-rbac.html">Lab: Implementing Basic Security (Encryption, RBAC)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-deploying-an-ha-broker-cluster.html">Lab: Deploying an HA Broker Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-monitoring-with-the-management-console.html">Lab: Monitoring with the Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-developing-and-testing-core-protocol-and-amqp-clients.html">Lab: Developing and Testing Core Protocol and AMQP Clients</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">AMQ Broker on OpenShift: Deployment and Management</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></li>
    <li><a href="different-message-stores-for-amq-broker-on-openshift.html">Different Message Stores for AMQ Broker on OpenShift</a></li>
    <li><a href="jdbc-message-store-integration-with-external-databases.html">JDBC Message Store Integration with External Databases</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">JDBC Message Store Integration with External Databases</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This section delves into integrating Red Hat AMQ Broker on OpenShift with external databases for message persistence using JDBC. We will explore the technical aspects of this integration, its benefits, considerations, and provide a hands-on lab to demonstrate the configuration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview_of_jdbc_message_store"><a class="anchor" href="#_overview_of_jdbc_message_store"></a>Overview of JDBC Message Store</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While AMQ Broker primarily uses a high-performance, file-based journal for message persistence, it also offers the capability to store message and binding data in an external relational database using Java Database Connectivity (JDBC). This approach allows organizations to leverage existing database infrastructure and integrate messaging persistence into their wider IT data management strategies.</p>
</div>
<div class="sect2">
<h3 id="_how_jdbc_persistence_works"><a class="anchor" href="#_how_jdbc_persistence_works"></a>How JDBC Persistence Works</h3>
<div class="paragraph">
<p>When configured for JDBC persistence, AMQ Broker uses a JDBC connection to store message and binding data in dedicated database tables. The data within these tables is encoded using AMQ Broker&#8217;s internal journal encoding format. This means that while the data resides in a relational database, it&#8217;s not directly queryable via SQL for message content in a human-readable format, but rather serves as a durable store managed by the broker.</p>
</div>
</div>
<div class="sect2">
<h3 id="_benefits_and_use_cases"><a class="anchor" href="#_benefits_and_use_cases"></a>Benefits and Use Cases</h3>
<div class="paragraph">
<p>Integrating with an external database for message persistence can be beneficial in scenarios such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Centralized Data Management:</strong> Organizations with strict policies for data management and backups often prefer to consolidate all persistent data, including message data, within their existing database infrastructure.</p>
</li>
<li>
<p><strong>Leveraging Existing DBA Expertise:</strong> Utilizing a database for persistence allows database administrators (DBAs) to apply their expertise in monitoring, backing up, and recovering message data using familiar tools and processes.</p>
</li>
<li>
<p><strong>Infrastructure Consistency:</strong> Aligning AMQ Broker&#8217;s persistence with other applications that rely on relational databases can simplify overall infrastructure management.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_performance_considerations"><a class="anchor" href="#_performance_considerations"></a>Performance Considerations</h3>
<div class="paragraph">
<p>It is important to note that <strong>using a database for message persistence can negatively affect the performance of a messaging system</strong>. Writing messaging data to database tables via JDBC introduces significant overhead compared to the highly optimized, direct disk I/O of the file-based journal. This overhead stems from several factors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JDBC Driver and Network Latency:</strong> Data needs to travel over the network to the database server, involving network latency and processing by the JDBC driver.</p>
</li>
<li>
<p><strong>Database Transaction Overhead:</strong> Each message persistence operation translates into database transactions, which involve logging, locking, and synchronization within the database system.</p>
</li>
<li>
<p><strong>I/O Characteristics:</strong> Databases often abstract the underlying storage, which can sometimes lead to less optimal I/O patterns for write-heavy, sequential operations compared to a finely tuned file journal.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Therefore, while offering integration benefits, JDBC persistence should be chosen carefully, particularly for high-throughput or low-latency messaging scenarios where the file-based journal typically excels.</p>
</div>
</div>
<div class="sect2">
<h3 id="_supported_databases"><a class="anchor" href="#_supported_databases"></a>Supported Databases</h3>
<div class="paragraph">
<p>AMQ Broker supports various relational databases for JDBC persistence. For the most up-to-date list of supported databases, always refer to the <code>Red Hat AMQ 7 Supported Configurations</code> documentation on the Red Hat Customer Portal. Common choices include PostgreSQL, MySQL, Oracle, and Microsoft SQL Server.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites_for_jdbc_message_store"><a class="anchor" href="#_prerequisites_for_jdbc_message_store"></a>Prerequisites for JDBC Message Store</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before configuring AMQ Broker for JDBC persistence, ensure the following prerequisites are met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Dedicated Database:</strong> A dedicated relational database instance (e.g., PostgreSQL, MySQL) is required for use with AMQ Broker. This database should be accessible from the OpenShift cluster where the broker will run.</p>
</li>
<li>
<p><strong>Database Credentials:</strong> You will need appropriate database credentials (username and password) for the broker to connect and write data. These should be stored securely, ideally in an OpenShift <code>Secret</code>.</p>
</li>
<li>
<p><strong>JDBC Driver JAR File:</strong> The required JDBC driver JAR file for your specific database must be available to the broker at runtime. This typically involves:</p>
</li>
<li>
<p>Including the JAR in a custom broker image.</p>
</li>
<li>
<p>Mounting the JAR via an OpenShift <code>ConfigMap</code> or <code>Secret</code> as a volume into the broker pod and ensuring it&#8217;s on the classpath.</p>
</li>
<li>
<p>Using an <code>initContainer</code> to download the JAR into a shared volume accessible by the broker container.</p>
</li>
<li>
<p>Refer to the AMQ Broker documentation (e.g., "Section 4.4, 'Adding third-party JAR files'") for specific instructions on making JAR files available.</p>
</li>
<li>
<p><strong>OpenShift Storage (for the database):</strong> If deploying the database itself within OpenShift, ensure you have appropriate Persistent Volumes (PVs) and Persistent Volume Claims (PVCs) configured for database data persistence.</p>
</li>
<li>
<p><strong>Network Connectivity:</strong> Ensure network policies and firewall rules allow the AMQ Broker pods to connect to the database server on the specified port.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_amq_broker_for_jdbc_persistence"><a class="anchor" href="#_configuring_amq_broker_for_jdbc_persistence"></a>Configuring AMQ Broker for JDBC Persistence</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Configuring AMQ Broker for JDBC persistence on OpenShift involves specifying the database connection details within the <code>brokerProperties</code> attribute of the <code>ActiveMQArtemis</code> Custom Resource (CR).</p>
</div>
<div class="sect2">
<h3 id="_key_configuration_attributes"><a class="anchor" href="#_key_configuration_attributes"></a>Key Configuration Attributes</h3>
<div class="paragraph">
<p>The primary attributes you&#8217;ll configure under <code>brokerProperties</code> are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>storeConfiguration</code>:</p>
</li>
<li>
<p>Set this to <code>DATABASE</code> to enable JDBC persistence.</p>
</li>
<li>
<p><code>storeConfiguration.jdbcDriverClassName</code>:</p>
</li>
<li>
<p>Specify the fully-qualified class name of your JDBC database driver.</p>
</li>
<li>
<p><strong>Example (PostgreSQL):</strong> <code>org.postgresql.Driver</code></p>
</li>
<li>
<p><code>storeConfiguration.jdbcConnectionUrl</code>:</p>
</li>
<li>
<p>Provide the full JDBC connection URL for your database server. This URL includes the hostname, port, database name, and any necessary configuration parameters like user and password.</p>
</li>
<li>
<p><strong>Example (PostgreSQL):</strong> <code>jdbc:postgresql://postgresql-service.default.svc.cluster.local:5432/postgres?user=postgres&amp;password=postgres</code></p>
</li>
<li>
<p><strong>Note:</strong> It is highly recommended to use OpenShift `Secret`s for sensitive information like database usernames and passwords instead of hardcoding them directly in the URL. You can use OpenShift environment variables injected from Secrets.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_high_availability_with_shared_store_jdbc"><a class="anchor" href="#_high_availability_with_shared_store_jdbc"></a>High Availability with Shared Store JDBC</h3>
<div class="paragraph">
<p>When using JDBC persistence in a High Availability (HA) setup with a <strong>shared store</strong> architecture, it&#8217;s crucial to prevent multiple brokers from concurrently accessing and writing to the same database tables, which can lead to data corruption. AMQ Broker addresses this using a JDBC lease lock.</p>
</div>
<div class="paragraph">
<p>To enable this, set the <code>HAPolicyConfiguration</code> attribute in your CR:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>HAPolicyConfiguration: SHARED_STORE_PRIMARY</code></p>
</li>
<li>
<p>This setting ensures that only one broker instance (<code>PRIMARY</code>) can write to the database at any given time, acquiring a lease lock. If a second broker attempts to start with this configuration, it will become a backup and wait for the primary to fail before attempting to take over the lease and become active.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_example_custom_resource_snippet"><a class="anchor" href="#_example_custom_resource_snippet"></a>Example Custom Resource Snippet</h3>
<div class="paragraph">
<p>Here&#8217;s an example of how these properties would look in an <code>ActiveMQArtemis</code> Custom Resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: broker.amq.io/v1beta1
kind: ActiveMQArtemis
metadata:
  name: my-jdbc-broker
spec:
  deploymentPlan:
    size: 1 # For a single instance with JDBC, or 2 for HA shared store
    image: registry.redhat.io/amq7/amq-broker-rhel8:latest
    # ... other deployment plan configurations ...
  brokerProperties:
    - "storeConfiguration=DATABASE"
    - "storeConfiguration.jdbcDriverClassName=org.postgresql.Driver"
    - "storeConfiguration.jdbcConnectionUrl=jdbc:postgresql://postgresql-service.default.svc.cluster.local:5432/postgres?user=postgres&amp;password=postgres"
    # Example for HA shared store (if applicable, typically with size: 2)
    # - "HAPolicyConfiguration=SHARED_STORE_PRIMARY"
  # ... other broker configurations ...</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Security Note</strong>: In a real-world scenario, the <code>user</code> and <code>password</code> in <code>jdbcConnectionUrl</code> should be injected via environment variables from an OpenShift Secret, not hardcoded. The AMQ Broker Operator supports injecting secrets into broker pods.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hands_on_lab_deploying_amq_broker_with_jdbc_persistence"><a class="anchor" href="#_hands_on_lab_deploying_amq_broker_with_jdbc_persistence"></a>Hands-on Lab: Deploying AMQ Broker with JDBC Persistence</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lab, you will deploy a basic PostgreSQL database on OpenShift and then configure an AMQ Broker instance to use this PostgreSQL database for message persistence.</p>
</div>
<div class="sect2">
<h3 id="_lab_prerequisites"><a class="anchor" href="#_lab_prerequisites"></a>Lab Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>An OpenShift cluster with <code>oc</code> CLI configured and logged in.</p>
</li>
<li>
<p>The AMQ Broker Operator installed in your project (e.g., in the <code>amq-broker</code> namespace, or your current project).</p>
</li>
<li>
<p>Sufficient permissions to create Deployments, Services, Secrets, and Custom Resources.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_step_1_create_a_new_openshift_project"><a class="anchor" href="#_step_1_create_a_new_openshift_project"></a>Step 1: Create a New OpenShift Project</h3>
<div class="paragraph">
<p>Create a new project for this lab to keep resources organized.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc new-project amq-jdbc-lab</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_deploy_a_postgresql_database"><a class="anchor" href="#_step_2_deploy_a_postgresql_database"></a>Step 2: Deploy a PostgreSQL Database</h3>
<div class="paragraph">
<p>We&#8217;ll deploy a simple PostgreSQL instance for demonstration purposes. In a production environment, you would likely use a more robust, highly available database solution.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Create a PostgreSQL Secret:</strong> This secret will hold the database password.</p>
<div class="literalblock">
<div class="content">
<pre>[source,bash,subs="attributes+"]
----
oc create secret generic postgres-secret --from-literal=POSTGRES_PASSWORD=mysecurepassword
----</pre>
</div>
</div>
</li>
<li>
<p><strong>Deploy PostgreSQL:</strong> Create a Deployment and Service for PostgreSQL.</p>
<div class="literalblock">
<div class="content">
<pre>[source,yaml,subs="attributes+"]
----
# postgres-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: postgresql
  labels:
    app: postgresql
spec:
  selector:
    matchLabels:
      app: postgresql
  replicas: 1
  template:
    metadata:
      labels:
        app: postgresql
    spec:
      containers:
        - name: postgresql
          image: registry.redhat.io/rhel8/postgresql-13:latest # Or a suitable PostgreSQL image
          ports:
            - containerPort: 5432
          env:
            - name: POSTGRESQL_USER
              value: postgres
            - name: POSTGRESQL_DATABASE
              value: postgres
            - name: POSTGRESQL_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: postgres-secret
                  key: POSTGRES_PASSWORD
          volumeMounts:
            - name: postgres-data
              mountPath: /var/lib/pgsql/data
      volumes:
        - name: postgres-data
          persistentVolumeClaim:
            claimName: postgres-pvc
---
# postgres-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: postgresql-service
  labels:
    app: postgresql
spec:
  ports:
    - port: 5432
      targetPort: 5432
      name: postgresql
  selector:
    app: postgresql
---
# postgres-pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgres-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
----</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Apply these manifests:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>[source,bash,subs="attributes+"]
----
oc apply -f postgres-deployment.yaml
----</pre>
</div>
</div>
</li>
<li>
<p><strong>Verify PostgreSQL Deployment:</strong> Wait for the PostgreSQL pod to be <code>Running</code>.</p>
<div class="literalblock">
<div class="content">
<pre>[source,bash,subs="attributes+"]
----
oc get pods -l app=postgresql
oc get svc postgresql-service
----</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Note the service name: `postgresql-service`. This will be part of your JDBC URL.</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_3_make_jdbc_driver_available_to_amq_broker"><a class="anchor" href="#_step_3_make_jdbc_driver_available_to_amq_broker"></a>Step 3: Make JDBC Driver Available to AMQ Broker</h3>
<div class="paragraph">
<p>For this lab, we will use a common approach: providing the JDBC driver via a <code>ConfigMap</code> and mounting it into the broker pod.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Download the PostgreSQL JDBC Driver:</strong>
Fetch the PostgreSQL JDBC driver JAR file. For example, from Maven Central.</p>
<div class="literalblock">
<div class="content">
<pre>[source,bash,subs="attributes+"]
----
curl -o postgresql-42.2.19.jar https://repo1.maven.org/maven2/org/postgresql/postgresql/42.2.19/postgresql-42.2.19.jar
----
*Note*: Replace `42.2.19` with a version compatible with your PostgreSQL image if necessary.</pre>
</div>
</div>
</li>
<li>
<p><strong>Create a ConfigMap with the Driver:</strong>
Embed the JAR file into a ConfigMap. This will base64 encode the JAR.</p>
<div class="literalblock">
<div class="content">
<pre>[source,bash,subs="attributes+"]
----
oc create configmap amq-jdbc-driver --from-file=postgresql.jar=postgresql-42.2.19.jar
----
*Note*: The key in the ConfigMap is `postgresql.jar`.</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_4_create_the_amq_broker_custom_resource_with_jdbc_configuration"><a class="anchor" href="#_step_4_create_the_amq_broker_custom_resource_with_jdbc_configuration"></a>Step 4: Create the AMQ Broker Custom Resource with JDBC Configuration</h3>
<div class="paragraph">
<p>Now, create the <code>ActiveMQArtemis</code> CR, configuring it to use the PostgreSQL database and mount the JDBC driver.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># amq-broker-jdbc.yaml
apiVersion: broker.amq.io/v1beta1
kind: ActiveMQArtemis
metadata:
  name: amq-jdbc-broker
spec:
  deploymentPlan:
    size: 1
    image: registry.redhat.io/amq7/amq-broker-rhel8:latest
    requireLogin: false # For simplicity in lab, typically 'true'
    persistenceEnabled: true # Ensure persistence is enabled
    env: # Inject DB credentials from secret
      - name: POSTGRES_USERNAME
        valueFrom:
          secretKeyRef:
            name: postgres-secret
            key: POSTGRESQL_USER # Assuming postgres-secret contains POSTGRESQL_USER and POSTGRESQL_PASSWORD
      - name: POSTGRES_PASSWORD
        valueFrom:
          secretKeyRef:
            name: postgres-secret
            key: POSTGRES_PASSWORD
    brokerProperties:
      - "storeConfiguration=DATABASE"
      - "storeConfiguration.jdbcDriverClassName=org.postgresql.Driver"
      - "storeConfiguration.jdbcConnectionUrl=jdbc:postgresql://postgresql-service:5432/postgres?user=$(POSTGRES_USERNAME)&amp;password=$(POSTGRES_PASSWORD)"
    extraVolumes: # Mount the ConfigMap with the JDBC driver
      - name: jdbc-driver-volume
        configMap:
          name: amq-jdbc-driver
    extraVolumeMounts:
      - name: jdbc-driver-volume
        mountPath: /opt/amq/drivers # A standard location where broker might look or add to classpath
        readOnly: true
    # For a production scenario, you'd also need to ensure the driver is on the classpath.
    # The AMQ Broker image often has mechanisms to pick up JARs from specific locations like /opt/amq/drivers.
    # If not, a custom image with the driver pre-installed or explicit classpath modification is needed.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Apply the AMQ Broker CR:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f amq-broker-jdbc.yaml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_5_monitor_broker_deployment"><a class="anchor" href="#_step_5_monitor_broker_deployment"></a>Step 5: Monitor Broker Deployment</h3>
<div class="paragraph">
<p>Wait for the AMQ Broker pod to be <code>Running</code>. This may take a few minutes as the Operator provisions the broker.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get activemqartemis amq-jdbc-broker -o yaml
oc get pods -l app=amq-jdbc-broker
oc logs -f $(oc get pod -l app=amq-jdbc-broker -o jsonpath='{.items[0].metadata.name}')</code></pre>
</div>
</div>
<div class="paragraph">
<p>Look for messages in the broker logs indicating successful connection to the database and persistence setup, e.g., "ActiveMQ Artemis Message Journal is using JDBC for persistence."</p>
</div>
</div>
<div class="sect2">
<h3 id="_step_6_verify_persistence_optional"><a class="anchor" href="#_step_6_verify_persistence_optional"></a>Step 6: Verify Persistence (Optional)</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Expose the Management Console:</strong> If not already exposed, create a route to access the Hawtio console.</p>
<div class="literalblock">
<div class="content">
<pre>[source,bash,subs="attributes+"]
----
oc get activemqartemis amq-jdbc-broker -o jsonpath='{.status.consoleURL}'
----
Navigate to this URL in your browser. (Default credentials are `admin`/`admin` if `requireLogin` is false, otherwise look up the `activemqartemis-console-users` secret).</pre>
</div>
</div>
</li>
<li>
<p><strong>Send and Receive Messages:</strong>
Use the Hawtio console or a client application (e.g., using <code>oc rsh</code> into the broker pod to run <code>artemis producer</code> and <code>artemis consumer</code> commands, or external clients) to send some messages to a queue (e.g., <code>exampleQueue</code>).</p>
</li>
<li>
<p><strong>Restart the Broker:</strong>
Simulate a broker restart by scaling down and then up the broker deployment, or deleting the pod.</p>
<div class="literalblock">
<div class="content">
<pre>[source,bash,subs="attributes+"]
----
oc scale activemqartemis amq-jdbc-broker --replicas=0
oc get pods -l app=amq-jdbc-broker # Verify pod is terminated
oc scale activemqartemis amq-jdbc-broker --replicas=1
----</pre>
</div>
</div>
</li>
<li>
<p><strong>Verify Message Persistence:</strong>
Once the broker pod is <code>Running</code> again, re-access the Hawtio console. Check <code>exampleQueue</code>. If the messages are still present, it confirms that JDBC persistence is working correctly.</p>
</li>
<li>
<p><strong>Clean up:</strong></p>
<div class="literalblock">
<div class="content">
<pre>[source,bash,subs="attributes+"]
----
oc delete activemqartemis amq-jdbc-broker
oc delete deployment postgresql
oc delete service postgresql-service
oc delete pvc postgres-pvc
oc delete secret postgres-secret
oc delete configmap amq-jdbc-driver
oc delete project amq-jdbc-lab
rm postgresql-42.2.19.jar # delete the downloaded jar
----</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting_and_best_practices"><a class="anchor" href="#_troubleshooting_and_best_practices"></a>Troubleshooting and Best Practices</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Database Connection Errors:</strong></p>
</li>
<li>
<p><strong>Symptom:</strong> Broker fails to start, logs show JDBC connection exceptions, "Communications link failure," or "Connection refused."</p>
</li>
<li>
<p><strong>Cause:</strong> Incorrect <code>jdbcConnectionUrl</code>, wrong credentials, database not running, network policy blocking access, incorrect port.</p>
</li>
<li>
<p><strong>Remedy:</strong> Double-check the URL, username, and password. Ensure the <code>postgresql-service</code> is up and accessible. Check OpenShift <code>NetworkPolicy</code> if any are applied.</p>
</li>
<li>
<p><strong>JDBC Driver Not Found:</strong></p>
</li>
<li>
<p><strong>Symptom:</strong> Broker logs show <code>ClassNotFoundException</code> for the JDBC driver.</p>
</li>
<li>
<p><strong>Cause:</strong> The JDBC driver JAR file is not correctly placed on the broker&#8217;s classpath.</p>
</li>
<li>
<p><strong>Remedy:</strong> Verify the <code>extraVolumeMounts</code> in the CR and ensure the <code>ConfigMap</code> (<code>amq-jdbc-driver</code>) contains the correct JAR. For specific AMQ Broker images, consult documentation on where to place third-party JARs or how to modify the classpath. Using a custom image with the driver pre-installed is often the most robust solution for production.</p>
</li>
<li>
<p><strong>Performance Degradation:</strong></p>
</li>
<li>
<p><strong>Symptom:</strong> High message latency, low throughput, increased CPU/memory usage on broker or database.</p>
</li>
<li>
<p><strong>Cause:</strong> Inherent overhead of JDBC persistence, inefficient database configuration, network bottlenecks.</p>
</li>
<li>
<p><strong>Remedy:</strong> Review database performance metrics. Optimize database indexing and configuration. Consider using the file-based journal for high-performance scenarios if JDBC integration is not a strict requirement.</p>
</li>
<li>
<p><strong>Schema Issues:</strong></p>
</li>
<li>
<p><strong>Symptom:</strong> Broker fails to start or persist messages with database errors related to table or column creation/access.</p>
</li>
<li>
<p><strong>Cause:</strong> Insufficient database user permissions, existing incompatible schema, database issues.</p>
</li>
<li>
<p><strong>Remedy:</strong> Ensure the database user has <code>CREATE TABLE</code>, <code>INSERT</code>, <code>SELECT</code>, <code>UPDATE</code>, <code>DELETE</code> permissions. If using an existing database, ensure there are no conflicts.</p>
</li>
<li>
<p><strong>Shared Store HA:</strong></p>
</li>
<li>
<p>Always use <code>HAPolicyConfiguration: SHARED_STORE_PRIMARY</code> for shared store HA setups with JDBC to prevent data corruption. Without this, multiple active brokers could simultaneously try to write to the same tables.</p>
</li>
<li>
<p><strong>Database Security:</strong></p>
</li>
<li>
<p>Never hardcode database credentials in the <code>ActiveMQArtemis</code> Custom Resource. Always use OpenShift <code>Secret`s to store sensitive information and inject them into the broker pod&#8217;s environment variables, then reference these variables in the `jdbcConnectionUrl</code>.</p>
</li>
<li>
<p>Configure SSL/TLS for JDBC connections to encrypt data in transit between the broker and the database. This typically involves adding SSL parameters to the <code>jdbcConnectionUrl</code> and managing trust stores for the broker.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="file-based-message-store-configuration.html">File-Based Message Store Configuration</a></span>
  <span class="next"><a href="journal-vs-paging-for-message-persistence.html">Journal vs. Paging for Message Persistence</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
