<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Securing External Access to AMQ Broker on OpenShift :: AMQ Broker on OpenShift: Deployment and Management</title>
    <link rel="prev" href="configuring-client-connections-for-external-access.html">
    <link rel="next" href="../core-protocol-client-examples/core-protocol-client-examples.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">AMQ Broker on OpenShift: Deployment and Management</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="amq-on-openshift" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../overview-of-message-oriented-middleware/overview-of-message-oriented-middleware.html">Overview of Message-Oriented Middleware</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/introduction-to-message-oriented-middleware-mom.html">Introduction to Message-Oriented Middleware (MOM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/benefits-and-use-cases-of-asynchronous-messaging.html">Benefits and Use Cases of Asynchronous Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/core-concepts-producers-consumers-queues-topics.html">Core Concepts: Producers, Consumers, Queues, Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview-of-message-oriented-middleware/common-messaging-patterns-point-to-point-publishsubscribe.html">Common Messaging Patterns</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-overview/amq-broker-overview.html">AMQ Broker Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/introduction-to-red-hat-amq-broker.html">Introduction to Red Hat AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/foundations-in-apache-activemq-artemis.html">Foundations in Apache ActiveMQ Artemis</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/key-features-and-capabilities.html">Key Features and Capabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/supported-messaging-protocols-jms-amqp-mqtt-stomp-openwire.html">Supported Messaging Protocols (JMS, AMQP, MQTT, STOMP, OpenWire)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-overview/amq-broker-architecture.html">AMQ Broker Architecture</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/deploying-amq-broker-on-openshift.html">Deploying AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/openshift-container-platform-fundamentals-for-amq-broker.html">OpenShift Container Platform Fundamentals for AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/introduction-to-the-amq-broker-operator.html">Introduction to the AMQ Broker Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/installing-the-amq-broker-operator-via-cli-or-operatorhub.html">Installing the AMQ Broker Operator via CLI or OperatorHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/understanding-amq-broker-custom-resource-definitions-crds.html">understanding-amq-broker-custom-resource-definitions-crds.adoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/creating-and-managing-broker-instances-with-custom-resources-crs.html">Creating and Managing Broker Instances with Custom Resources (CRs)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deploying-amq-broker-on-openshift/monitoring-initial-broker-deployment.html">Monitoring Initial Broker Deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/scaling-amq-broker-on-openshift.html">Scaling AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/concepts-of-horizontal-and-vertical-scaling.html">Concepts of Horizontal and Vertical Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/scaling-broker-pods-and-replicas.html">Scaling Broker Pods and Replicas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/adjusting-resource-allocations-cpu-memory-for-broker-pods.html">Adjusting Resource Allocations (CPU, Memory) for Broker Pods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/performance-considerations-for-scaling.html">Performance Considerations for Scaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scaling-amq-broker-on-openshift/best-practices-for-scaling-in-openshift.html">Best Practices for Scaling AMQ Broker on OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../securing-amq-broker-on-openshift/securing-amq-broker-on-openshift.html">Securing AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/encrypting-connections.html">Encrypting Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-ssltls-for-client-broker-communication.html">Configuring SSL/TLS for Client-Broker Communication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/managing-certificates-and-trust-stores-on-openshift.html">Managing Certificates and Trust Stores on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-secure-listeners.html">Enabling Secure Listeners</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/enabling-rbac-role-based-access-control.html">Enabling RBAC (Role-Based Access Control)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/defining-users-roles-and-permissions-in-amq-broker.html">Defining Users, Roles, and Permissions in AMQ Broker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-with-openshift-authentication-mechanisms.html">Integrating with OpenShift Authentication Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/integrating-external-identity-providers-idp.html">Integrating External Identity Providers (IDP)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/overview-of-external-idp-integration-eg-ldap-keycloak.html">Overview of External IDP Integration (e.g., LDAP, Keycloak)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/configuring-amq-broker-for-external-idp-authentication.html">Configuring AMQ Broker for External Identity Provider (IDP) Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../securing-amq-broker-on-openshift/mapping-external-roles-to-broker-roles.html">Mapping External Roles to Broker Roles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/amq-broker-high-availability-on-openshift.html">AMQ Broker High Availability on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/introduction-to-high-availability-ha-concepts.html">Introduction to High Availability (HA) Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/broker-clustering-strategies-shared-store-vs-replicated-live-backup.html">Broker Clustering Strategies: Shared Store vs. Replicated Live-Backup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/deploying-and-configuring-an-ha-broker-pair.html">Deploying and Configuring an HA Broker Pair</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/understanding-failover-and-recovery-mechanisms.html">Understanding Failover and Recovery Mechanisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amq-broker-high-availability-on-openshift/persistence-and-data-replication-for-ha.html">Persistence and Data Replication for HA</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/different-message-stores-for-amq-broker-on-openshift.html">Different Message Stores for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/overview-of-message-store-options.html">Overview of Message Store Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/file-based-message-store-configuration.html">File-Based Message Store Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/jdbc-message-store-integration-with-external-databases.html">JDBC Message Store Integration with External Databases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/journal-vs-paging-for-message-persistence.html">Journal vs. Paging for Message Persistence</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/choosing-the-appropriate-message-store-strategy.html">Choosing the Appropriate Message Store Strategy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../different-message-stores-for-amq-broker-on-openshift/openshift-storage-considerations-persistent-volumes.html">Storage Considerations</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/accessing-management-console-for-amq-broker-on-openshift.html">Accessing Management Console for AMQ Broker on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/introduction-to-the-hawtio-management-console.html">Introduction to the Hawtio Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/exposing-the-console-via-openshift-routes.html">Exposing the Hawtio Management Console via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/authentication-and-authorization-for-console-access.html">Authentication and Authorization for AMQ Broker Management Console Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/monitoring-broker-metrics-queues-and-topics.html">Monitoring Broker Metrics, Queues, and Topics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../accessing-management-console-for-amq-broker-on-openshift/performing-administrative-tasks-through-the-console.html">Performing Administrative Tasks through the Console</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="enabling-external-access-to-brokers-deployed-on-openshift.html">Enabling External Access to Brokers Deployed on OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="openshift-networking-concepts-services-routes-ingress.html">OpenShift Networking Concepts: Services, Routes, Ingress</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exposing-broker-listeners-via-openshift-routes.html">Exposing Broker Listeners via OpenShift Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuring-client-connections-for-external-access.html">Configuring Client Connections for External Access</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="security-implications-and-best-practices-for-external-access.html">Securing External Access to AMQ Broker on OpenShift</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core-protocol-client-examples/core-protocol-client-examples.html">Core Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/introduction-to-amq-core-protocol.html">Introduction to AMQ Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/setting-up-a-core-protocol-client-development-environment.html">Setting Up a Core Protocol Client Development Environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/developing-producers-and-consumers-with-java-core-protocol.html">Developing Producers and Consumers with Java Core Protocol</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/implementing-point-to-point-messaging.html">Implementing Point-to-Point Messaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-protocol-client-examples/implementing-publishsubscribe-messaging.html">Implementing Publish/Subscribe Messaging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../amqp-protocol-client-examples/amqp-protocol-client-examples.html">AMQP Protocol Client Examples</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/introduction-to-amqp-10-standard.html">Introduction to AMQP 1.0 Standard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/setting-up-an-amqp-client-development-environment-eg-qpid-jms.html">Setting Up an AMQP Client Development Environment (e.g., Qpid JMS)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/developing-producers-and-consumers-with-amqp-clients-eg-java-python.html">Developing Producers and Consumers with AMQP Clients (e.g., Java, Python)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/connecting-to-amq-broker-using-amqp.html">Connecting to AMQ Broker using AMQP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amqp-protocol-client-examples/exploring-advanced-amqp-features.html">Exploring Advanced AMQP Features</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/hands-on-lab-deploying-and-managing-amq-broker.html">Hands-on Lab: Deploying and Managing AMQ Broker</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-deploying-a-basic-amq-broker-instance.html">Lab: Deploying a Basic AMQ Broker Instance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-configuring-external-access-and-testing-client-connectivity.html">Lab: Configuring External Access and Testing Client Connectivity</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-implementing-basic-security-encryption-rbac.html">Lab: Implementing Basic Security (Encryption, RBAC)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-deploying-an-ha-broker-cluster.html">Lab: Deploying an HA Broker Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-monitoring-with-the-management-console.html">Lab: Monitoring with the Management Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab-deploying-and-managing-amq-broker/lab-developing-and-testing-core-protocol-and-amqp-clients.html">Lab: Developing and Testing Core Protocol and AMQP Clients</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">AMQ Broker on OpenShift: Deployment and Management</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">AMQ Broker on OpenShift: Deployment and Management</a></li>
    <li><a href="enabling-external-access-to-brokers-deployed-on-openshift.html">Enabling External Access to Brokers Deployed on OpenShift</a></li>
    <li><a href="security-implications-and-best-practices-for-external-access.html">Securing External Access to AMQ Broker on OpenShift</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Securing External Access to AMQ Broker on OpenShift</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This module delves into the critical security considerations and best practices when enabling external clients to connect to your Red Hat AMQ Broker instances deployed on OpenShift. Properly securing external access is paramount to protect your messaging infrastructure and the sensitive data it handles.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_implications_of_external_access"><a class="anchor" href="#_security_implications_of_external_access"></a>Security Implications of External Access</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you expose your AMQ Broker to external networks, you introduce potential attack vectors and vulnerabilities that must be addressed. Understanding these implications is the first step towards building a robust security posture.</p>
</div>
<div class="sect2">
<h3 id="_1_increased_attack_surface"><a class="anchor" href="#_1_increased_attack_surface"></a>1. Increased Attack Surface</h3>
<div class="paragraph">
<p>Exposing broker listeners via OpenShift Routes or NodePorts expands the network surface accessible to external entities. This inherently increases the potential for malicious actors to discover and attempt to exploit vulnerabilities in your broker or the underlying OpenShift platform.</p>
</div>
</div>
<div class="sect2">
<h3 id="_2_data_interception_and_tampering"><a class="anchor" href="#_2_data_interception_and_tampering"></a>2. Data Interception and Tampering</h3>
<div class="paragraph">
<p>Without proper encryption, data transmitted between external clients and the broker over public or untrusted networks can be intercepted and read (eavesdropping) or even modified (tampering) by attackers. This compromises the confidentiality and integrity of your messages.</p>
</div>
</div>
<div class="sect2">
<h3 id="_3_unauthorized_access_and_abuse"><a class="anchor" href="#_3_unauthorized_access_and_abuse"></a>3. Unauthorized Access and Abuse</h3>
<div class="paragraph">
<p>If authentication and authorization mechanisms are weak or improperly configured, unauthorized users or applications could gain access to your broker. This could lead to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Data theft:</strong> Accessing sensitive messages from queues or topics.</p>
</li>
<li>
<p><strong>Service disruption:</strong> Maliciously deleting queues, messages, or reconfiguring the broker.</p>
</li>
<li>
<p><strong>Resource exhaustion:</strong> Flooding the broker with messages or connection attempts, leading to Denial of Service (DoS).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_4_exposure_of_broker_internals"><a class="anchor" href="#_4_exposure_of_broker_internals"></a>4. Exposure of Broker Internals</h3>
<div class="paragraph">
<p>Misconfigured external access might inadvertently expose internal network details, broker version information, or other metadata that could aid an attacker in planning further attacks.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_best_practices_for_securing_external_access"><a class="anchor" href="#_best_practices_for_securing_external_access"></a>Best Practices for Securing External Access</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Implementing a layered security approach is crucial for protecting your AMQ Broker when enabling external access.</p>
</div>
<div class="sect2">
<h3 id="_1_encrypting_connections_with_ssltls"><a class="anchor" href="#_1_encrypting_connections_with_ssltls"></a>1. Encrypting Connections with SSL/TLS</h3>
<div class="paragraph">
<p>Encrypting client-broker communication is a fundamental security requirement. SSL/TLS (Transport Layer Security) ensures that data exchanged between the client and the broker remains confidential and tamper-proof.</p>
</div>
<div class="paragraph">
<p>OpenShift Routes can handle TLS termination, but for AMQ Broker, it&#8217;s often preferred to use <strong>passthrough</strong> routes or re-encrypt routes to ensure end-to-end encryption from the client to the broker pod. The broker itself must be configured to use TLS listeners.</p>
</div>
<div class="sect3">
<h4 id="_one_way_tls_vs_two_way_tls_mutual_tls"><a class="anchor" href="#_one_way_tls_vs_two_way_tls_mutual_tls"></a>One-Way TLS vs. Two-Way TLS (Mutual TLS)</h4>
<div class="ulist">
<ul>
<li>
<p><strong>One-Way TLS:</strong> The client verifies the broker&#8217;s identity using the broker&#8217;s certificate. This ensures the client is connecting to the legitimate broker and encrypts the communication. The broker does not verify the client&#8217;s identity at the TLS layer.</p>
</li>
<li>
<p><strong>Two-Way TLS (Mutual TLS - mTLS):</strong> Both the client and the broker verify each other&#8217;s identities using certificates. This provides a stronger level of authentication, as the broker will only allow connections from clients presenting a trusted certificate.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_clients_for_tls"><a class="anchor" href="#_configuring_clients_for_tls"></a>Configuring Clients for TLS</h4>
<div class="paragraph">
<p>Clients connecting to a TLS-enabled broker listener must be configured with the necessary trust stores and, for two-way TLS, key stores.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Trust Store (<code>client.ts</code>):</strong> Contains the certificate of the Certificate Authority (CA) that signed the broker&#8217;s certificate, or the broker&#8217;s public certificate itself. This allows the client to verify the broker&#8217;s identity.</p>
</li>
<li>
<p><strong>Key Store (<code>client.ks</code>):</strong> Contains the client&#8217;s private key and its corresponding certificate. This is required for two-way TLS, allowing the client to present its identity to the broker.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The provided context highlights how to configure different protocol clients for TLS.</p>
</div>
<div class="sect4">
<h5 id="_openwire_client_with_two_way_tls"><a class="anchor" href="#_openwire_client_with_two_way_tls"></a>OpenWire Client with Two-Way TLS</h5>
<div class="paragraph">
<p>For an external OpenWire client using two-way TLS, the connection URL must specify the <code>ssl://</code> protocol and the port (typically 443 for external routes). Additionally, Java Virtual Machine (JVM) flags are used to provide the paths and passwords for the client&#8217;s key store and trust store.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Client connection URL
ssl://my-broker-deployment-0-svc-rte-my-openshift-project.my-openshift-domain:443

# JVM flags for client-side key and trust store configuration
-Djavax.net.ssl.keyStore=~/client.ks -Djavax.net.ssl.keyStorePassword=&lt;key_store_password&gt; \
-Djavax.net.ssl.trustStore=~/client.ts -Djavax.net.ssl.trustStorePassword=&lt;trust_store_password&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace <code>my-broker-deployment-0-svc-rte-my-openshift-project.my-openshift-domain</code> with the actual route hostname.</p>
</li>
<li>
<p>Replace <code>&lt;key_store_password&gt;</code> and <code>&lt;trust_store_password&gt;</code> with your actual passwords.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_amqp_client_with_one_way_tls"><a class="anchor" href="#_amqp_client_with_one_way_tls"></a>AMQP Client with One-Way TLS</h5>
<div class="paragraph">
<p>For an external AMQP client using one-way TLS, the connection URL uses <code>amqps://</code> and includes parameters for the trust store. The <code>transport.verifyHost=true</code> parameter is crucial for host name verification, preventing man-in-the-middle attacks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-url hljs" data-lang="url">amqps://my-broker-deployment-0-svc-rte-my-openshift-project.my-openshift-domain:443?
transport.verifyHost=true&amp;transport.trustStoreLocation=~/client.ts&amp;transport.trustStorePassword=&lt;trust_store_password&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace <code>my-broker-deployment-0-svc-rte-my-openshift-project.my-openshift-domain</code> with the actual route hostname.</p>
</li>
<li>
<p>Replace <code>&lt;trust_store_password&gt;</code> with your actual password.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_amqp_client_with_two_way_tls"><a class="anchor" href="#_amqp_client_with_two_way_tls"></a>AMQP Client with Two-Way TLS</h5>
<div class="paragraph">
<p>For an external AMQP client using two-way TLS, both the key store and trust store parameters are included in the connection URL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-url hljs" data-lang="url">amqps://my-broker-deployment-0-svc-rte-my-openshift-project.my-openshift-domain:443?
transport.verifyHost=true&amp;transport.keyStoreLocation=~/client.ks&amp;transport.keyStorePassword=&lt;key_store_password&gt;&amp;transport.trustStoreLocation=~/client.ts&amp;transport.trustStorePassword=&lt;trust_store_password&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace <code>my-broker-deployment-0-svc-rte-my-openshift-project.my-openshift-domain</code> with the actual route hostname.</p>
</li>
<li>
<p>Replace <code>&lt;key_store_password&gt;</code> and <code>&lt;trust_store_password&gt;</code> with your actual passwords.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_strong_authentication_and_authorization_rbac"><a class="anchor" href="#_2_strong_authentication_and_authorization_rbac"></a>2. Strong Authentication and Authorization (RBAC)</h3>
<div class="paragraph">
<p>Beyond TLS encryption, strong authentication and granular authorization are critical to control who can connect to your broker and what actions they can perform.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>AMQ Broker&#8217;s Internal Security:</strong> AMQ Broker provides its own robust security mechanisms, allowing you to define users, roles, and fine-grained permissions for queues, topics, and broker operations.</p>
</li>
<li>
<p><strong>Integrating with OpenShift Authentication:</strong> For applications deployed on OpenShift, you can leverage OpenShift&#8217;s built-in authentication mechanisms (e.g., service accounts, OAuth with Keycloak) to provide identities to your messaging clients.</p>
</li>
<li>
<p><strong>External Identity Providers (IDPs):</strong> For external clients, integrating with enterprise-grade IDPs like LDAP, Active Directory, or Keycloak allows you to centralize user management and enforce consistent access policies. AMQ Broker can be configured to delegate authentication to these external systems and map external roles to internal broker roles.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_3_network_segmentation_and_firewalls"><a class="anchor" href="#_3_network_segmentation_and_firewalls"></a>3. Network Segmentation and Firewalls</h3>
<div class="paragraph">
<p>Utilize OpenShift NetworkPolicies to restrict network traffic to and from your AMQ Broker pods. This allows you to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Isolate brokers:</strong> Ensure only authorized applications or external ingress controllers can reach the broker&#8217;s listeners.</p>
</li>
<li>
<p><strong>Control egress:</strong> Limit what external resources your broker can connect to, if any.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For external access, ensure that any external firewalls or cloud security groups are configured to only allow traffic on the specific ports and protocols required for your broker (e.g., 443 for HTTPS/TLS).</p>
</div>
</div>
<div class="sect2">
<h3 id="_4_secure_openshift_routes_and_ingress"><a class="anchor" href="#_4_secure_openshift_routes_and_ingress"></a>4. Secure OpenShift Routes and Ingress</h3>
<div class="paragraph">
<p>When exposing AMQ Broker via OpenShift Routes or an Ingress controller, configure them securely:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>TLS Termination:</strong> Always enable TLS on your routes (<code>https://</code>). For AMQ Broker, prefer <code>passthrough</code> routes to maintain end-to-end encryption to the broker pod, or use <code>re-encrypt</code> routes if the broker is configured for HTTPS. Avoid <code>edge</code> termination unless you have specific reasons and understand the implications (data is unencrypted between the router and the broker pod).</p>
</li>
<li>
<p><strong>Hostnames:</strong> Use specific hostnames rather than wildcards, where possible, to reduce exposure.</p>
</li>
<li>
<p><strong>Load Balancing:</strong> If you have multiple broker pods behind a route, clients might load balance connections. If you prefer clients <strong>not</strong> to use topology information for load balancing, you can configure the client connection URL as specified in the context:</p>
</li>
<li>
<p>For Core protocol clients, set <code>useTopologyForLoadBalancing=false</code>.</p>
</li>
<li>
<p>For other clients, explicitly list each broker&#8217;s route hostname in the connection URL to ensure explicit failover rather than load balancing.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_5_principle_of_least_privilege"><a class="anchor" href="#_5_principle_of_least_privilege"></a>5. Principle of Least Privilege</h3>
<div class="paragraph">
<p>Grant only the minimum necessary permissions to users and applications accessing the broker.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Client Permissions:</strong> A client application publishing messages to a specific topic should only have permission to publish to that topic, not to administer the broker or consume from unrelated queues.</p>
</li>
<li>
<p><strong>Operator Permissions:</strong> The AMQ Broker Operator should run with appropriate service account permissions, following OpenShift&#8217;s security best practices.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_6_monitoring_and_logging"><a class="anchor" href="#_6_monitoring_and_logging"></a>6. Monitoring and Logging</h3>
<div class="paragraph">
<p>Implement comprehensive monitoring and logging for your AMQ Broker and OpenShift environment.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Broker Logs:</strong> Monitor broker logs for failed connection attempts, authentication failures, and suspicious activities.</p>
</li>
<li>
<p><strong>OpenShift Audit Logs:</strong> Leverage OpenShift&#8217;s audit logging to track API calls related to routes, services, and broker Custom Resources.</p>
</li>
<li>
<p><strong>Network Activity:</strong> Monitor network traffic to identify unusual patterns or attempted intrusions.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_7_regular_security_audits_and_updates"><a class="anchor" href="#_7_regular_security_audits_and_updates"></a>7. Regular Security Audits and Updates</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Patching:</strong> Keep your AMQ Broker images, OpenShift platform, and client libraries updated to the latest stable versions to benefit from security fixes.</p>
</li>
<li>
<p><strong>Audits:</strong> Periodically review your security configurations, network policies, and access controls to ensure they align with your organization&#8217;s security policies and best practices.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hands_on_activity_configuring_external_client_with_one_way_tls"><a class="anchor" href="#_hands_on_activity_configuring_external_client_with_one_way_tls"></a>Hands-on Activity: Configuring External Client with One-Way TLS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this activity, you will simulate connecting an external client to an AMQ Broker instance exposed via an OpenShift Route with one-way TLS enabled. This assumes you have an AMQ Broker already deployed on OpenShift with a TLS listener and an HTTPS/passthrough route, and have obtained the necessary broker certificate or CA certificate.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This activity focuses on the <strong>client-side configuration</strong> based on the provided context. Setting up the broker&#8217;s TLS listener and OpenShift Route is outside the immediate scope of this topic but is a prerequisite for a fully functional setup.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>An OpenShift cluster with the AMQ Broker Operator installed.</p>
</li>
<li>
<p>An AMQ Broker instance deployed, configured with a TLS listener (e.g., on port 61617) and accessible via an OpenShift <code>passthrough</code> or <code>re-encrypt</code> route (e.g., exposed on port 443).</p>
</li>
<li>
<p>The hostname of the OpenShift Route (e.g., <code>my-broker-deployment-0-svc-rte-my-openshift-project.my-openshift-domain</code>).</p>
</li>
<li>
<p>The public certificate of your AMQ Broker or the CA certificate that signed it. Save this certificate to a file, for example, <code>broker.crt</code>.</p>
</li>
<li>
<p>Java Development Kit (JDK) installed on your client machine.</p>
</li>
<li>
<p>Apache ActiveMQ Artemis client libraries or Apache Qpid JMS client libraries for AMQP.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_steps"><a class="anchor" href="#_steps"></a>Steps</h3>
<div class="sect3">
<h4 id="_1_prepare_the_client_trust_store"><a class="anchor" href="#_1_prepare_the_client_trust_store"></a>1. Prepare the Client Trust Store</h4>
<div class="paragraph">
<p>You need to import the broker&#8217;s certificate into a Java KeyStore (JKS) file that will serve as your client&#8217;s trust store.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new trust store file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">keytool -import -alias broker-cert -file broker.crt -keystore client.ts -storepass &lt;trust_store_password&gt; -noprompt</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace <code>broker.crt</code> with the path to your broker&#8217;s certificate file.</p>
</li>
<li>
<p>Replace <code>&lt;trust_store_password&gt;</code> with a strong password for your trust store. Remember this password for the next steps.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_2_develop_a_simple_amqp_client_java_example"><a class="anchor" href="#_2_develop_a_simple_amqp_client_java_example"></a>2. Develop a Simple AMQP Client (Java Example)</h4>
<div class="paragraph">
<p>Create a simple Java AMQP client application that will connect to the broker. This example uses the Qpid JMS client.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a file named <code>AmqpTlsProducer.java</code> with the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jms.*;
import org.apache.qpid.jms.JmsConnectionFactory;

public class AmqpTlsProducer {

    public static void main(String[] args) throws JMSException {
        // Replace with your broker's route hostname and port (e.g., 443 for HTTPS routes)
        String BROKER_HOSTNAME = "my-broker-deployment-0-svc-rte-my-openshift-project.my-openshift-domain";
        String TRUST_STORE_PATH = System.getProperty("user.home") + "/client.ts"; // Path to your client.ts
        String TRUST_STORE_PASSWORD = "&lt;trust_store_password&gt;"; // Your trust store password

        // AMQP 1.0 connection URL with one-way TLS configuration
        String connectionUri = String.format("amqps://%s:443?transport.verifyHost=true&amp;transport.trustStoreLocation=%s&amp;transport.trustStorePassword=%s",
                                            BROKER_HOSTNAME, TRUST_STORE_PATH, TRUST_STORE_PASSWORD);

        ConnectionFactory connectionFactory = new JmsConnectionFactory(connectionUri);
        Connection connection = null;
        Session session = null;

        try {
            connection = connectionFactory.createConnection();
            connection.start();
            session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
            Destination destination = session.createQueue("mySecureQueue");
            MessageProducer producer = session.createProducer(destination);

            TextMessage message = session.createTextMessage("Hello from secured AMQP client!");
            producer.send(message);
            System.out.println("Sent message: " + message.getText());

        } catch (Exception e) {
            System.err.println("Error connecting or sending message: " + e.getMessage());
            e.printStackTrace();
        } finally {
            if (session != null) session.close();
            if (connection != null) connection.close();
        }
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace <code>my-broker-deployment-0-svc-rte-my-openshift-project.my-openshift-domain</code> with your actual broker route hostname.</p>
</li>
<li>
<p>Replace <code>&lt;trust_store_password&gt;</code> with the password you set in the previous step.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_3_compile_and_run_the_client"><a class="anchor" href="#_3_compile_and_run_the_client"></a>3. Compile and Run the Client</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the Qpid JMS client JARs. You can usually find them in Maven Central or include them via a <code>pom.xml</code> if using Maven. For simplicity, download <code>qpid-jms-client-&lt;version&gt;.jar</code> and its dependencies (e.g., <code>slf4j-api</code>, <code>proton-j</code>).</p>
</li>
<li>
<p>Compile the Java client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">javac -cp ".:/path/to/qpid-jms-client-&lt;version&gt;.jar:/path/to/slf4j-api-&lt;version&gt;.jar" AmqpTlsProducer.java</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Adjust the classpath (<code>-cp</code>) to include all necessary Qpid JMS client JARs and their dependencies.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Run the client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -cp ".:/path/to/qpid-jms-client-&lt;version&gt;.jar:/path/to/slf4j-api-&lt;version&gt;.jar" AmqpTlsProducer</code></pre>
</div>
</div>
<div class="paragraph">
<p>If successful, you should see output indicating the message was sent, and the connection will be established over TLS. You can verify the message on your broker&#8217;s management console.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>This hands-on activity demonstrates how to configure a client to leverage one-way TLS for secure communication, a critical step in enabling external access securely. For two-way TLS, you would additionally generate a client key pair, create a client key store, and configure the client connection URL with <code>transport.keyStoreLocation</code> and <code>transport.keyStorePassword</code> parameters, as shown in the examples provided in the context.</p>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="configuring-client-connections-for-external-access.html">Configuring Client Connections for External Access</a></span>
  <span class="next"><a href="../core-protocol-client-examples/core-protocol-client-examples.html">Core Protocol Client Examples</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
